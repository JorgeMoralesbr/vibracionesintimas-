<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibra√ß√µes √çntimas - Prazer e Bem-Estar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://sdk.mercadopago.com/js/v2"></script>
    <style>
        :root {
            --primary: #e91e63;
            --primary-dark: #c2185b;
            --secondary: #9c27b0;
            --accent: #ff4081;
            --light: #f8bbd9;
            --dark: #880e4f;
            --text: #333333;
            --text-light: #777777;
            --background: #fff5f9;
            --white: #ffffff;
            --gray: #f5f5f5;
            --discount: #4caf50;
            --success: #4caf50;
            --warning: #ff9800;
            --error: #f44336;
            --ml-blue: #2968c8;
            --ml-yellow: #ffe600;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Top Banner com CEP */
        .top-banner {
            background: linear-gradient(45deg, var(--ml-blue), #1e4fa0);
            color: var(--white);
            padding: 8px 0;
            font-size: 13px;
        }

        .top-banner-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .banner-offer {
            background: var(--ml-yellow);
            color: #333;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
        }

        .cep-container {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 12px;
        }

        .cep-input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            width: 120px;
            font-size: 12px;
        }

        .cep-btn {
            background: transparent;
            border: 1px solid var(--white);
            color: var(--white);
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .cep-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        /* Header estilo Mercado Livre */
        .main-header {
            background: var(--ml-yellow);
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            text-decoration: none;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-main {
            font-size: 22px;
            font-weight: 800;
            background: linear-gradient(45deg, #e91e63, #9c27b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }
        
        .logo-subtitle {
            font-size: 11px;
            color: #ff4081;
            font-weight: 500;
        }

        .search-container {
            flex-grow: 1;
            position: relative;
            max-width: 600px;
        }

        .search-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--ml-blue);
            border-radius: 4px;
            font-size: 14px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .search-button {
            position: absolute;
            right: 2px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--ml-blue);
            color: white;
            border: none;
            border-radius: 0 4px 4px 0;
            width: 50px;
            height: calc(100% - 4px);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-icons {
            display: flex;
            gap: 25px;
        }

        .nav-icon {
            text-align: center;
            font-size: 12px;
            color: var(--text);
            cursor: pointer;
            text-decoration: none;
            position: relative;
            padding: 5px;
        }

        .nav-icon:hover {
            color: var(--primary);
        }

        .nav-icon i {
            font-size: 20px;
            display: block;
            margin-bottom: 2px;
        }

        .cart-count, .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .notification-badge {
            background: var(--error);
        }

        /* Banner Promocional */
        .promo-banner {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            text-align: center;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: 600;
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* Filtros */
        .filters-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--white);
            margin: 10px 0;
            border-radius: 8px;
            flex-wrap: wrap;
            gap: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 25px;
            background: var(--white);
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .filter-btn:hover {
            border-color: var(--primary);
        }

        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            padding: 20px 0 40px;
        }

        .product-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .product-badges {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 2;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .discount-badge {
            background: var(--discount);
            color: var(--white);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .free-shipping-badge {
            background: var(--primary);
            color: var(--white);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .best-seller-badge {
            background: var(--warning);
            color: var(--white);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .product-image {
            height: 250px;
            background: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-info {
            padding: 20px;
        }

        .brand {
            color: var(--text-light);
            font-size: 12px;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text);
            font-size: 16px;
            height: 48px;
            overflow: hidden;
            line-height: 1.4;
        }

        .price-container {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 8px;
        }

        .price {
            color: var(--primary);
            font-weight: 700;
            font-size: 20px;
        }

        .original-price {
            color: var(--text-light);
            text-decoration: line-through;
            font-size: 14px;
        }

        .installments {
            color: var(--success);
            font-size: 13px;
            font-weight: 600;
            width: 100%;
        }

        .stock-info {
            font-size: 12px;
            color: var(--text-light);
            margin-top: 8px;
        }

        .stock-low {
            color: var(--warning);
        }

        .stock-out {
            color: var(--error);
        }

        .product-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }

        .btn-cart {
            background: var(--primary);
            color: var(--white);
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            flex-grow: 1;
            margin-right: 10px;
            font-size: 14px;
        }

        .btn-cart:hover {
            background: var(--primary-dark);
        }

        .btn-cart:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .btn-wishlist {
            background: var(--gray);
            color: var(--text);
            border: none;
            width: 50px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-wishlist:hover {
            background: #e0e0e0;
        }

        .btn-wishlist.active {
            background: #ffe6e6;
            color: #e91e63;
        }

        /* Footer */
        .footer {
            background: var(--white);
            padding: 50px 0 20px;
            margin-top: 50px;
            border-top: 1px solid #eee;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 30px;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 18px;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 12px;
        }

        .footer-section a {
            color: var(--text);
            text-decoration: none;
            transition: color 0.3s;
            cursor: pointer;
            font-size: 14px;
        }

        .footer-section a:hover {
            color: var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #eee;
            color: var(--text-light);
            font-size: 14px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 20px rgba(0,0,0,0.2);
            z-index: 1001;
            padding: 0;
            overflow-y: auto;
        }

        .modal.active {
            display: block;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-overlay.active {
            display: block;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px;
            border-bottom: 1px solid #eee;
            background: #f8f9fa;
        }

        .modal-content {
            padding: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--gray);
            color: var(--text);
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #45a049;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Admin Panel MEJORADO */
        .admin-panel {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .admin-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .admin-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* Nuevo Sistema Admin */
        .admin-nav {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 20px;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            background: var(--white);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .nav-btn.active {
            background: var(--primary);
            color: white;
        }

        .nav-btn:hover {
            border-color: var(--primary);
        }

        .admin-section-content {
            display: none;
        }

        .admin-section-content.active {
            display: block;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .checkbox-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin: 15px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .quick-action-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quick-action-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }

        .action-icon {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .image-preview {
            width: 100px;
            height: 100px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
        }

        .category-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .category-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid transparent;
        }

        .category-card:hover {
            border-color: var(--primary);
        }

        /* Chatbot */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            z-index: 1002;
            display: none;
        }

        .chatbot-header {
            background: var(--primary);
            color: white;
            padding: 15px 20px;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-messages {
            height: 300px;
            overflow-y: auto;
            padding: 20px;
        }

        .chatbot-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #eee;
        }

        .chatbot-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1001;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .top-banner-content {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .search-container {
                max-width: 100%;
            }

            .nav-icons {
                gap: 15px;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 15px;
            }

            .filters-container {
                flex-direction: column;
                align-items: flex-start;
            }

            .filter-buttons {
                width: 100%;
                overflow-x: auto;
                padding-bottom: 10px;
            }

            .modal {
                width: 100%;
            }

            .chatbot-container {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .nav-buttons {
                flex-direction: column;
            }
        }

        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Notification Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1003;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .toast.show {
            opacity: 1;
        }

        .toast.success {
            border-left: 4px solid var(--success);
        }

        .toast.error {
            border-left: 4px solid var(--error);
        }

        .toast.warning {
            border-left: 4px solid var(--warning);
        }
    </style>
</head>
<body>
    <!-- Top Banner com CEP -->
    <div class="top-banner">
        <div class="container">
            <div class="top-banner-content">
                <div class="banner-text">
                    <span class="banner-offer">BLACK FRIDAY - AT√â 60% OFF</span>
                    <span>Frete Gr√°tis acima de R$ 199 ‚Ä¢ Vale at√© 01/12/2023</span>
                </div>
                <div class="cep-container">
                    <span>üì¶ Confira o envio para o seu endere√ßo</span>
                    <input type="text" class="cep-input" placeholder="Seu CEP" maxlength="9" id="top-cep-input">
                    <button class="cep-btn" onclick="calcularFrete()">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <div class="main-header">
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo-container">
                    <div class="logo-text">
                        <div class="logo-main">VIBRA√á√ïES √çNTIMAS</div>
                        <div class="logo-subtitle">Prazer & Bem-Estar ‚Ä¢ CNPJ: 63.575.463/0001-00</div>
                    </div>
                </a>
                
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Buscar produtos, marcas e muito mais..." id="search-input">
                    <button class="search-button" onclick="searchProducts()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                
                <div class="nav-icons">
                    <div class="nav-icon" id="account-icon" onclick="openAccountModal()">
                        <i class="fas fa-user"></i>
                        <div>Minha Conta</div>
                    </div>
                    <div class="nav-icon" id="notifications-icon" onclick="openNotifications()">
                        <i class="fas fa-bell"></i>
                        <div>Notifica√ß√µes</div>
                        <span class="notification-badge" id="notification-count">0</span>
                    </div>
                    <div class="nav-icon" id="cart-icon" onclick="openCartModal()">
                        <i class="fas fa-shopping-bag"></i>
                        <div>Sacola</div>
                        <span class="cart-count" id="cart-count">0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Promo Banner -->
    <div class="container">
        <div class="promo-banner">
            üéâ BEAUTY NOVEMBER - AT√â 30% OFF + FRETE GR√ÅTIS üéâ
        </div>
    </div>

    <!-- Filters -->
    <div class="container">
        <div class="filters-container">
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all" onclick="filterProducts('all')">Todos</button>
                <!-- Los botones de categor√≠as se cargar√°n din√°micamente -->
            </div>
        </div>
    </div>
    
    <!-- Products Grid -->
    <div class="container">
        <div class="products-grid" id="products-grid">
            <!-- Products loaded dynamically -->
        </div>
    </div>

    <!-- Admin Panel MEJORADO -->
    <div class="container">
        <div class="admin-panel" id="admin-panel" style="display: none;">
            <div class="admin-section">
                <h3><i class="fas fa-cog"></i> Painel Administrativo - Sistema Simplificado</h3>
                
                <div class="admin-nav">
                    <div class="nav-buttons">
                        <button class="nav-btn active" onclick="showAdminSection('dashboard')">
                            <i class="fas fa-home"></i> Dashboard
                        </button>
                        <button class="nav-btn" onclick="showAdminSection('products')">
                            <i class="fas fa-box"></i> Ver Produtos
                        </button>
                        <button class="nav-btn" onclick="showAdminSection('add-product')">
                            <i class="fas fa-plus"></i> Novo Produto
                        </button>
                        <button class="nav-btn" onclick="showAdminSection('categories')">
                            <i class="fas fa-tags"></i> Categorias
                        </button>
                        <button class="nav-btn" onclick="showAdminSection('stock')">
                            <i class="fas fa-warehouse"></i> Estoque
                        </button>
                    </div>
                </div>

                <!-- Dashboard -->
                <div id="admin-dashboard" class="admin-section-content active">
                    <h4>üìä Dashboard R√°pido</h4>
                    
                    <div class="quick-actions">
                        <div class="quick-action-card" onclick="showAdminSection('add-product')">
                            <div class="action-icon">üì¶</div>
                            <h3>Adicionar Produto</h3>
                            <p>Cadastro r√°pido de novos produtos</p>
                        </div>
                        
                        <div class="quick-action-card" onclick="showAdminSection('products')">
                            <div class="action-icon">üëÄ</div>
                            <h3>Ver Produtos</h3>
                            <p>Visualizar e editar produtos</p>
                        </div>
                        
                        <div class="quick-action-card" onclick="showAdminSection('categories')">
                            <div class="action-icon">üè∑Ô∏è</div>
                            <h3>Gerenciar Categorias</h3>
                            <p>Adicionar/remover categorias</p>
                        </div>
                        
                        <div class="quick-action-card" onclick="showAdminSection('stock')">
                            <div class="action-icon">üìà</div>
                            <h3>Controle de Estoque</h3>
                            <p>Ajustar quantidades</p>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <h4>üìà Estat√≠sticas R√°pidas</h4>
                        <div id="admin-stats-content" style="margin-top: 20px;">
                            <!-- Las estad√≠sticas se cargar√°n aqu√≠ -->
                        </div>
                    </div>
                </div>

                <!-- Lista de Produtos -->
                <div id="admin-products" class="admin-section-content">
                    <h4>üì¶ Todos os Produtos</h4>
                    <div class="products-grid" id="admin-products-list">
                        <!-- Los productos se cargar√°n aqu√≠ -->
                    </div>
                </div>

                <!-- Agregar Producto - FORMULARIO SIMPLIFICADO -->
                <div id="admin-add-product" class="admin-section-content">
                    <h4>üöÄ Adicionar Produto R√°pido</h4>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nome do Produto *</label>
                            <input type="text" id="admin-product-name" placeholder="Ex: Vibrador Rabbit Premium">
                        </div>

                        <div class="form-group">
                            <label>Pre√ßo (R$) *</label>
                            <input type="number" id="admin-product-price" placeholder="199.90" step="0.01">
                        </div>

                        <div class="form-group">
                            <label>Categoria *</label>
                            <select id="admin-product-category">
                                <option value="">Selecione uma categoria</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Estoque *</label>
                            <input type="number" id="admin-product-stock" placeholder="10" min="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Imagem do Produto (URL)</label>
                        <input type="url" id="admin-product-image" placeholder="https://exemplo.com/imagem.jpg" 
                               onchange="previewAdminImage(this.value)">
                        <small style="color: #666;">Cole o link direto da imagem</small>
                        
                        <div class="image-preview" id="admin-image-preview">
                            <span style="color: #999;">Pr√©-visualiza√ß√£o</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Descri√ß√£o (Opcional)</label>
                        <textarea id="admin-product-description" placeholder="Descri√ß√£o do produto..." rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Tags</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="admin-tag-frete" value="frete-gratis">
                                <label for="admin-tag-frete">üöö Frete Gr√°tis</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="admin-tag-vendido" value="mais-vendido">
                                <label for="admin-tag-vendido">üî• Mais Vendido</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="admin-tag-novo" value="novo">
                                <label for="admin-tag-novo">üÜï Novo</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="admin-tag-oferta" value="oferta">
                                <label for="admin-tag-oferta">üíé Oferta</label>
                            </div>
                        </div>
                    </div>

                    <button class="btn btn-primary" onclick="addAdminProduct()" style="padding: 15px 30px; font-size: 18px;">
                        <i class="fas fa-plus-circle"></i> ADICIONAR PRODUTO
                    </button>
                </div>

                <!-- Gesti√≥n de Categor√≠as -->
                <div id="admin-categories" class="admin-section-content">
                    <h4>üè∑Ô∏è Gerenciar Categorias</h4>
                    
                    <div class="form-group">
                        <label>Nova Categoria:</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="admin-new-category-name" placeholder="Nome da categoria">
                            <button class="btn btn-primary" onclick="addAdminCategory()">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>

                    <h4 style="margin-top: 30px;">Categorias Existentes:</h4>
                    <div class="category-list" id="admin-categories-list">
                        <!-- Las categor√≠as se cargar√°n aqu√≠ -->
                    </div>
                </div>

                <!-- Gesti√≥n de Stock -->
                <div id="admin-stock" class="admin-section-content">
                    <h4>üìà Controle de Estoque</h4>
                    <div id="admin-stock-list">
                        <!-- El stock se cargar√° aqu√≠ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>VIBRA√á√ïES √çNTIMAS</h3>
                    <p><strong>MEI:</strong> Jorge Eliecer Morales Ramirez<br>
                    <strong>CNPJ:</strong> 63.575.463/0001-00<br>
                    Descubra uma nova experi√™ncia de prazer e bem-estar.</p>
                    <p><strong>üìß Email:</strong> intimomixbr@gmail.com<br>
                    <strong>üì± WhatsApp:</strong> (11) 99999-9999</p>
                </div>
                <div class="footer-section">
                    <h3>Categorias</h3>
                    <ul id="footer-categories">
                        <!-- Las categor√≠as se cargar√°n din√°micamente -->
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Ajuda</h3>
                    <ul>
                        <li><a href="#" onclick="openChatbot()">Chat Online</a></li>
                        <li><a href="#" onclick="showInfo('contact')">Contato</a></li>
                        <li><a href="#" onclick="showInfo('delivery')">Entregas e Prazos</a></li>
                        <li><a href="#" onclick="showInfo('returns')">Trocas e Devolu√ß√µes</a></li>
                        <li><a href="#" onclick="showInfo('faq')">Perguntas Frequentes</a></li>
                        <li><a href="#" onclick="showInfo('sizes')">Guia de Tamanhos</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="#" onclick="showInfo('terms')">Termos e Condi√ß√µes</a></li>
                        <li><a href="#" onclick="showInfo('privacy')">Pol√≠tica de Privacidade</a></li>
                        <li><a href="#" onclick="showInfo('cookies')">Pol√≠tica de Cookies</a></li>
                        <li><a href="#" onclick="showInfo('legal')">Aviso Legal</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2023 Vibra√ß√µes √çntimas. Todos os direitos reservados. | CNPJ: 63.575.463/0001-00
            </div>
        </div>
    </footer>

    <!-- Cart Modal -->
    <div class="modal-overlay" id="cart-overlay"></div>
    <div class="modal" id="cart-modal">
        <div class="modal-header">
            <h3><i class="fas fa-shopping-bag"></i> Minha Sacola</h3>
            <button class="btn btn-secondary" onclick="closeCartModal()">‚úï</button>
        </div>
        <div class="modal-content">
            <div class="cart-items" id="cart-items">
                <!-- Cart items loaded here -->
            </div>
            <div class="cart-total" id="cart-total" style="font-size: 18px; font-weight: 700; text-align: right; margin: 20px 0; padding-top: 20px; border-top: 2px solid #eee;">
                Total: R$ 0,00
            </div>
            
            <!-- Upselling Section -->
            <div id="upselling-section" style="display: none; margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <h4 style="margin-bottom: 10px;">üí° Voc√™ tamb√©m pode gostar:</h4>
                <div id="upselling-products">
                    <!-- Upselling products loaded here -->
                </div>
            </div>

            <button class="btn btn-primary" onclick="proceedToCheckout()" style="width: 100%; padding: 15px; font-size: 16px;">
                <i class="fas fa-lock"></i> Finalizar Compra
            </button>
        </div>
    </div>

    <!-- Account Modal -->
    <div class="modal-overlay" id="account-overlay"></div>
    <div class="modal" id="account-modal">
        <div class="modal-header">
            <h3><i class="fas fa-user"></i> Minha Conta</h3>
            <button class="btn btn-secondary" onclick="closeAccountModal()">‚úï</button>
        </div>
        <div class="modal-content">
            <div id="login-form">
                <div style="text-align: center; margin-bottom: 20px;">
                    <h4>Entre na sua conta</h4>
                    <p style="color: #666; font-size: 14px;">Acesse seus pedidos e favoritos</p>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="login-email" placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="login-password" placeholder="Sua senha">
                </div>
                <button class="btn btn-primary" onclick="login()" style="width: 100%; margin-bottom: 15px;">
                    <i class="fas fa-sign-in-alt"></i> Entrar
                </button>
                <div style="text-align: center;">
                    <p style="color: #666; margin-bottom: 15px;">N√£o tem conta?</p>
                    <button class="btn btn-secondary" onclick="showRegisterForm()" style="width: 100%;">
                        <i class="fas fa-user-plus"></i> Criar Conta
                    </button>
                </div>
                
                <!-- √ÅREA ADMINISTRATIVA - MEJORADA Y VISIBLE -->
                <div style="text-align: center; margin-top: 25px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #e0e0e0;">
                    <h5 style="margin-bottom: 10px; color: #333;">üîß √Årea do Administrador</h5>
                    <p style="font-size: 12px; color: #666; margin-bottom: 12px;">
                        Acesso exclusivo para gest√£o de produtos e pedidos
                    </p>
                    <button class="btn btn-primary" onclick="showAdminAccess()" style="padding: 10px 20px; font-size: 14px;">
                        <i class="fas fa-cog"></i> Acesso Administrativo
                    </button>
                </div>
            </div>

            <div id="register-form" style="display: none;">
                <!-- Formulario de registro (mantenido igual) -->
            </div>

            <div id="user-profile" style="display: none;">
                <!-- Perfil de usuario (mantenido igual) -->
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="modal-overlay" id="checkout-overlay"></div>
    <div class="modal" id="checkout-modal">
        <div class="modal-header">
            <h3><i class="fas fa-credit-card"></i> Finalizar Pedido</h3>
            <button class="btn btn-secondary" onclick="closeCheckoutModal()">‚úï</button>
        </div>
        <div class="modal-content">
            <div id="checkout-content">
                <!-- Checkout steps loaded here -->
            </div>
        </div>
    </div>

    <!-- Notifications Modal -->
    <div class="modal-overlay" id="notifications-overlay"></div>
    <div class="modal" id="notifications-modal">
        <div class="modal-header">
            <h3><i class="fas fa-bell"></i> Notifica√ß√µes</h3>
            <button class="btn btn-secondary" onclick="closeNotificationsModal()">‚úï</button>
        </div>
        <div class="modal-content">
            <div id="notifications-list">
                <!-- Notifications loaded here -->
            </div>
        </div>
    </div>

    <!-- Chatbot -->
    <div class="chatbot-toggle" onclick="toggleChatbot()">
        <i class="fas fa-comments"></i>
    </div>

    <div class="chatbot-container" id="chatbot">
        <div class="chatbot-header">
            <h4 style="margin: 0;"><i class="fas fa-robot"></i> Assistente Virtual</h4>
            <button class="btn btn-secondary" onclick="toggleChatbot()" style="background: transparent; border: none; color: white; padding: 5px;">‚úï</button>
        </div>
        <div class="chatbot-messages" id="chatbot-messages">
            <div class="chat-message bot-message">
                <strong>Assistente:</strong> Ol√°! Sou seu assistente virtual. Como posso ajudar voc√™ hoje?
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatbot-input" placeholder="Digite sua mensagem..." style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 20px;">
            <button class="btn btn-primary" onclick="sendChatMessage()" style="margin-left: 10px; border-radius: 20px; padding: 10px 15px;">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle" style="color: var(--success);"></i>
        <span id="toast-message">Opera√ß√£o realizada com sucesso!</span>
    </div>

    <script>
        // =============================================
        // SISTEMA COMPLETO INTEGRADO - VIBRA√á√ïES √çNTIMAS
        // =============================================

        // Database and State Management
        let products = JSON.parse(localStorage.getItem('products')) || [];
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
        let categories = JSON.parse(localStorage.getItem('categories')) || [
            'vibradores', 'sugadores', 'kits', 'lubrificantes', 'acessorios'
        ];
        let adminUsers = JSON.parse(localStorage.getItem('adminUsers')) || [
            { 
                email: 'intimomixbr@gmail.com', 
                password: 'Admin123!', 
                role: 'admin',
                name: 'Administrador Principal'
            }
        ];

        // Initialize default products if empty
        if (products.length === 0) {
            products = [
                {
                    id: 1,
                    name: "Vibrador Rabbit Dupla Fun√ß√£o",
                    description: "Vibrador rabbit com estimula√ß√£o dupla para clit√≥ris e ponto G. Design ergon√¥mico e silencioso.",
                    price: 174.93,
                    originalPrice: 249.90,
                    category: "vibradores",
                    stock: 15,
                    image: "https://images.unsplash.com/photo-1585849834901-94c5915d4c3f?w=500&h=500&fit=crop",
                    tags: ["frete-gratis", "mais-vendido", "oferta"],
                    rating: 4.8,
                    reviews: 127
                },
                {
                    id: 2,
                    name: "Sugador de Cl√≠toris Premium",
                    description: "Sugador de cl√≠toris com tecnologia air pressure. 10 n√≠veis de intensidade e design discreto.",
                    price: 218.93,
                    originalPrice: 299.90,
                    category: "sugadores",
                    stock: 12,
                    image: "https://images.unsplash.com/photo-1585849834901-94c5915d4c3f?w=500&h=500&fit=crop",
                    tags: ["frete-gratis", "novo"],
                    rating: 4.9,
                    reviews: 89
                }
            ];
            saveProducts();
            saveCategories();
        }

        // DOM Elements
        const productsGrid = document.getElementById('products-grid');
        const cartIcon = document.getElementById('cart-icon');
        const accountIcon = document.getElementById('account-icon');
        const notificationsIcon = document.getElementById('notifications-icon');
        const cartModal = document.getElementById('cart-modal');
        const accountModal = document.getElementById('account-modal');
        const checkoutModal = document.getElementById('checkout-modal');
        const notificationsModal = document.getElementById('notifications-modal');
        const cartOverlay = document.getElementById('cart-overlay');
        const accountOverlay = document.getElementById('account-overlay');
        const checkoutOverlay = document.getElementById('checkout-overlay');
        const notificationsOverlay = document.getElementById('notifications-overlay');
        const cartItems = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        const cartCount = document.getElementById('cart-count');
        const notificationCount = document.getElementById('notification-count');
        const adminPanel = document.getElementById('admin-panel');
        const searchInput = document.getElementById('search-input');
        const topCepInput = document.getElementById('top-cep-input');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const chatbot = document.getElementById('chatbot');
        const chatbotMessages = document.getElementById('chatbot-messages');
        const chatbotInput = document.getElementById('chatbot-input');

        // Current State
        let currentFilter = 'all';
        let currentCart = [];
        let isAdminMode = false;

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            loadCategoriesFilters();
            loadProducts();
            updateCartCount();
            updateNotificationCount();
            setupEventListeners();
            checkAdminAccess();
            loadAdminCategories();
            loadAdminStats();
            
            // Add some sample notifications
            if (notifications.length === 0) {
                addNotification('Bem-vindo √† Vibra√ß√µes √çntimas!', 'Sua loja de produtos para prazer e bem-estar.', 'info');
            }
        });

        // =============================================
        // NUEVO SISTEMA ADMINISTRATIVO SIMPLIFICADO
        // =============================================

        function showAdminSection(sectionId) {
            // Ocultar todas las secciones
            document.querySelectorAll('.admin-section-content').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar secci√≥n seleccionada
            document.getElementById('admin-' + sectionId).classList.add('active');
            
            // Actualizar botones de navegaci√≥n
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Recargar datos si es necesario
            if (sectionId === 'products') loadAdminProducts();
            if (sectionId === 'stock') loadAdminStock();
            if (sectionId === 'dashboard') loadAdminStats();
            if (sectionId === 'categories') loadAdminCategories();
        }

        function loadAdminCategories() {
            const categorySelect = document.getElementById('admin-product-category');
            const categoriesList = document.getElementById('admin-categories-list');
            
            // Limpiar selects
            categorySelect.innerHTML = '<option value="">Selecione uma categoria</option>';
            categoriesList.innerHTML = '';
            
            // Cargar categor√≠as en select
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                categorySelect.appendChild(option);
            });
            
            // Cargar lista de categor√≠as
            categories.forEach(category => {
                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card';
                categoryCard.innerHTML = `
                    <h4>${category.charAt(0).toUpperCase() + category.slice(1)}</h4>
                    <p>Produtos: ${products.filter(p => p.category === category).length}</p>
                    <div style="margin-top: 10px;">
                        <button class="btn btn-danger" onclick="removeAdminCategory('${category}')" 
                                ${products.some(p => p.category === category) ? 'disabled' : ''}>
                            <i class="fas fa-trash"></i> Remover
                        </button>
                    </div>
                `;
                categoriesList.appendChild(categoryCard);
            });
        }

        function addAdminCategory() {
            const nameInput = document.getElementById('admin-new-category-name');
            const name = nameInput.value.trim().toLowerCase();
            
            if (!name) {
                showToast('Digite o nome da categoria', 'error');
                return;
            }
            
            if (categories.includes(name)) {
                showToast('Categoria j√° existe', 'error');
                return;
            }
            
            categories.push(name);
            saveCategories();
            
            nameInput.value = '';
            loadAdminCategories();
            loadCategoriesFilters();
            showToast('Categoria adicionada com sucesso!');
        }

        function removeAdminCategory(categoryName) {
            if (products.some(product => product.category === categoryName)) {
                showToast('N√£o √© poss√≠vel remover categoria com produtos', 'error');
                return;
            }
            
            categories = categories.filter(cat => cat !== categoryName);
            saveCategories();
            loadAdminCategories();
            loadCategoriesFilters();
            showToast('Categoria removida!');
        }

        function previewAdminImage(url) {
            const preview = document.getElementById('admin-image-preview');
            if (url) {
                preview.innerHTML = `<img src="${url}" alt="Preview" onerror="this.style.display='none'">`;
            } else {
                preview.innerHTML = '<span style="color: #999;">Pr√©-visualiza√ß√£o</span>';
            }
        }

        function addAdminProduct() {
            // Obtener valores del formulario
            const name = document.getElementById('admin-product-name').value.trim();
            const price = parseFloat(document.getElementById('admin-product-price').value);
            const category = document.getElementById('admin-product-category').value;
            const stock = parseInt(document.getElementById('admin-product-stock').value);
            const image = document.getElementById('admin-product-image').value;
            const description = document.getElementById('admin-product-description').value.trim();

            // Validaciones b√°sicas
            if (!name) {
                showToast('Digite o nome do produto', 'error');
                return;
            }
            
            if (!price || price <= 0) {
                showToast('Digite um pre√ßo v√°lido', 'error');
                return;
            }
            
            if (!category) {
                showToast('Selecione uma categoria', 'error');
                return;
            }
            
            if (!stock || stock < 0) {
                showToast('Digite um estoque v√°lido', 'error');
                return;
            }

            // Obtener tags seleccionadas
            const tags = [];
            if (document.getElementById('admin-tag-frete').checked) tags.push('frete-gratis');
            if (document.getElementById('admin-tag-vendido').checked) tags.push('mais-vendido');
            if (document.getElementById('admin-tag-novo').checked) tags.push('novo');
            if (document.getElementById('admin-tag-oferta').checked) tags.push('oferta');

            // Crear producto
            const newProduct = {
                id: Date.now(),
                name: name,
                description: description || 'Produto de alta qualidade',
                price: price,
                originalPrice: price * 1.4,
                category: category,
                stock: stock,
                image: image || 'https://images.unsplash.com/photo-1585849834901-94c5915d4c3f?w=500&h=500&fit=crop',
                tags: tags,
                rating: 4.5,
                reviews: 0,
                createdAt: new Date().toISOString()
            };

            // Agregar producto
            products.push(newProduct);
            saveProducts();
            
            // Limpiar formulario
            document.getElementById('admin-product-name').value = '';
            document.getElementById('admin-product-price').value = '';
            document.getElementById('admin-product-stock').value = '';
            document.getElementById('admin-product-image').value = '';
            document.getElementById('admin-product-description').value = '';
            document.querySelectorAll('#admin-add-product input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            document.getElementById('admin-image-preview').innerHTML = '<span style="color: #999;">Pr√©-visualiza√ß√£o</span>';

            showToast('‚úÖ Produto adicionado com sucesso!');
            
            // Recargar vistas
            loadProducts();
            loadAdminProducts();
            loadAdminStats();
        }

        function loadAdminProducts() {
            const productsList = document.getElementById('admin-products-list');
            productsList.innerHTML = '';

            if (products.length === 0) {
                productsList.innerHTML = '<p style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">Nenhum produto cadastrado</p>';
                return;
            }

            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.name}" onerror="this.src='https://images.unsplash.com/photo-1585849834901-94c5915d4c3f?w=500&h=500&fit=crop'">
                    </div>
                    <h4>${product.name}</h4>
                    <p><strong>R$ ${product.price.toFixed(2)}</strong></p>
                    <p>Categoria: ${product.category}</p>
                    <p>Estoque: ${product.stock} unidades</p>
                    <div class="product-actions">
                        <button class="btn btn-primary" onclick="editAdminProduct(${product.id})">
                            <i class="fas fa-edit"></i> Editar
                        </button>
                        <button class="btn btn-danger" onclick="deleteAdminProduct(${product.id})">
                            <i class="fas fa-trash"></i> Excluir
                        </button>
                    </div>
                `;
                productsList.appendChild(productCard);
            });
        }

        function deleteAdminProduct(productId) {
            if (confirm('Tem certeza que deseja excluir este produto?')) {
                products = products.filter(p => p.id !== productId);
                saveProducts();
                loadAdminProducts();
                loadProducts();
                loadAdminStats();
                showToast('Produto exclu√≠do!');
            }
        }

        function editAdminProduct(productId) {
            const product = products.find(p => p.id === productId);
            
            // Llenar formulario con datos del producto
            document.getElementById('admin-product-name').value = product.name;
            document.getElementById('admin-product-price').value = product.price;
            document.getElementById('admin-product-category').value = product.category;
            document.getElementById('admin-product-stock').value = product.stock;
            document.getElementById('admin-product-image').value = product.image;
            document.getElementById('admin-product-description').value = product.description;
            
            // Marcar tags
            document.getElementById('admin-tag-frete').checked = product.tags.includes('frete-gratis');
            document.getElementById('admin-tag-vendido').checked = product.tags.includes('mais-vendido');
            document.getElementById('admin-tag-novo').checked = product.tags.includes('novo');
            document.getElementById('admin-tag-oferta').checked = product.tags.includes('oferta');
            
            // Mostrar preview
            previewAdminImage(product.image);
            
            // Eliminar producto antiguo
            products = products.filter(p => p.id !== productId);
            saveProducts();
            
            // Ir a la secci√≥n de agregar producto
            showAdminSection('add-product');
            
            showToast('Produto carregado para edi√ß√£o');
        }

        function loadAdminStock() {
            const stockList = document.getElementById('admin-stock-list');
            stockList.innerHTML = '';

            products.forEach(product => {
                const stockItem = document.createElement('div');
                stockItem.className = 'product-card';
                stockItem.innerHTML = `
                    <h4>${product.name}</h4>
                    <p>Estoque atual: <strong>${product.stock} unidades</strong></p>
                    <div style="display: flex; gap: 10px; align-items: center; margin-top: 10px;">
                        <button class="btn" onclick="updateAdminStock(${product.id}, -1)" style="padding: 8px 12px;">-1</button>
                        <button class="btn" onclick="updateAdminStock(${product.id}, -5)" style="padding: 8px 12px;">-5</button>
                        <input type="number" id="admin-stock-${product.id}" value="${product.stock}" style="width: 80px; padding: 8px;">
                        <button class="btn" onclick="updateAdminStock(${product.id}, 5)" style="padding: 8px 12px;">+5</button>
                        <button class="btn" onclick="updateAdminStock(${product.id}, 1)" style="padding: 8px 12px;">+1</button>
                        <button class="btn btn-primary" onclick="saveAdminStock(${product.id})" style="padding: 8px 12px;">Salvar</button>
                    </div>
                `;
                stockList.appendChild(stockItem);
            });
        }

        function updateAdminStock(productId, change) {
            const product = products.find(p => p.id === productId);
            const input = document.getElementById(`admin-stock-${productId}`);
            
            let newStock = product.stock + change;
            if (newStock < 0) newStock = 0;
            
            input.value = newStock;
        }

        function saveAdminStock(productId) {
            const input = document.getElementById(`admin-stock-${productId}`);
            const newStock = parseInt(input.value);
            
            if (newStock < 0) {
                showToast('Estoque n√£o pode ser negativo', 'error');
                return;
            }
            
            const product = products.find(p => p.id === productId);
            product.stock = newStock;
            
            saveProducts();
            loadProducts();
            showToast('Estoque atualizado!');
        }

        function loadAdminStats() {
            const statsContent = document.getElementById('admin-stats-content');
            
            const totalProducts = products.length;
            const totalStock = products.reduce((sum, product) => sum + product.stock, 0);
            const totalValue = products.reduce((sum, product) => sum + (product.price * product.stock), 0);
            
            statsContent.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; text-align: center;">
                        <h3>${totalProducts}</h3>
                        <p>Total de Produtos</p>
                    </div>
                    <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; text-align: center;">
                        <h3>${totalStock}</h3>
                        <p>Itens em Estoque</p>
                    </div>
                    <div style="background: #fff3e0; padding: 20px; border-radius: 10px; text-align: center;">
                        <h3>R$ ${totalValue.toFixed(2)}</h3>
                        <p>Valor Total</p>
                    </div>
                    <div style="background: #fce4ec; padding: 20px; border-radius: 10px; text-align: center;">
                        <h3>${categories.length}</h3>
                        <p>Categorias</p>
                    </div>
                </div>
            `;
        }

        // =============================================
        // FUNCIONES EXISTENTES (modificadas para integraci√≥n)
        // =============================================

        function loadCategoriesFilters() {
            const filterButtons = document.querySelector('.filter-buttons');
            const footerCategories = document.getElementById('footer-categories');
            
            // Limpiar botones existentes (excepto "Todos")
            const allButton = filterButtons.querySelector('[data-filter="all"]');
            filterButtons.innerHTML = '';
            filterButtons.appendChild(allButton);
            
            // Agregar botones de categor√≠as
            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'filter-btn';
                button.dataset.filter = category;
                button.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                button.onclick = () => filterProducts(category);
                filterButtons.appendChild(button);
            });
            
            // Actualizar categor√≠as en el footer
            footerCategories.innerHTML = '';
            categories.forEach(category => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="#" onclick="filterProducts('${category}')">${category.charAt(0).toUpperCase() + category.slice(1)}</a>`;
                footerCategories.appendChild(li);
            });
        }

        function setupEventListeners() {
            // Search functionality
            searchInput.addEventListener('input', debounce(searchProducts, 300));
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') searchProducts();
            });

            // CEP functionality
            topCepInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') calcularFrete();
            });

            // Chatbot functionality
            chatbotInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendChatMessage();
            });

            // Close modals when clicking overlay
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', function() {
                    closeAllModals();
                });
            });

            // Close modals with ESC key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') closeAllModals();
            });
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Product Management
        function loadProducts(filter = 'all') {
            productsGrid.innerHTML = '';
            currentFilter = filter;
            
            let filteredProducts = products;
            
            if (filter !== 'all') {
                filteredProducts = products.filter(product => product.category === filter);
            }
            
            if (filteredProducts.length === 0) {
                productsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
                        <i class="fas fa-search" style="font-size: 64px; color: #ccc; margin-bottom: 20px;"></i>
                        <h3 style="color: #666; margin-bottom: 15px;">Nenhum produto encontrado</h3>
                        <p style="color: #999; margin-bottom: 25px;">Tente outros termos de busca ou explore nossas categorias</p>
                        <button class="btn btn-primary" onclick="filterProducts('all')">
                            Ver Todos os Produtos
                        </button>
                    </div>
                `;
                return;
            }
            
            filteredProducts.forEach(product => {
                const productCard = createProductCard(product);
                productsGrid.appendChild(productCard);
            });
            
            // Actualizar botones activos
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.filter === filter) {
                    btn.classList.add('active');
                }
            });
        }

        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card';
            
            const discount = Math.round((1 - product.price / product.originalPrice) * 100);
            const hasFreeShipping = product.tags.includes('frete-gratis');
            const isBestSeller = product.tags.includes('mais-vendido');
            const isNew = product.tags.includes('novo');
            
            const badges = [];
            if (discount > 0) badges.push(`<div class="discount-badge">${discount}% OFF</div>`);
            if (hasFreeShipping) badges.push(`<div class="free-shipping-badge">FRETE GR√ÅTIS</div>`);
            if (isBestSeller) badges.push(`<div class="best-seller-badge">MAIS VENDIDO</div>`);
            if (isNew) badges.push(`<div class="free-shipping-badge" style="background: var(--ml-blue);">NOVO</div>`);
            
            const stockClass = product.stock < 10 ? 'stock-low' : product.stock === 0 ? 'stock-out' : '';
            const stockText = product.stock === 0 ? 'Fora de estoque' : 
                            product.stock < 10 ? `√öltimas ${product.stock} unidades!` : `${product.stock} dispon√≠veis`;
            
            const installments = Math.min(12, Math.floor(product.price / 10));
            const installmentValue = (product.price / installments).toFixed(2);
            
            card.innerHTML = `
                <div class="product-badges">
                    ${badges.join('')}
                </div>
                <div class="product-image">
                    <img src="${product.image}" alt="${product.name}" onerror="this.src='https://images.unsplash.com/photo-1585849834901-94c5915d4c3f?w=500&h=500&fit=crop'">
                </div>
                <div class="product-info">
                    <div class="brand">VIBRA√á√ïES √çNTIMAS</div>
                    <div class="product-name">${product.name}</div>
                    <div class="price-container">
                        <div class="price">R$ ${product.price.toFixed(2)}</div>
                        ${discount > 0 ? `<div class="original-price">R$ ${product.originalPrice.toFixed(2)}</div>` : ''}
                    </div>
                    <div class="installments">ou at√© ${installments}x de R$ ${installmentValue} sem juros</div>
                    <div class="stock-info ${stockClass}">${stockText}</div>
                    <div class="product-actions">
                        <button class="btn-cart" onclick="addToCart(${product.id})" ${product.stock === 0 ? 'disabled' : ''}>
                            ${product.stock === 0 ? 'Fora de Estoque' : 'Adicionar √† Sacola'}
                        </button>
                        <button class="btn-wishlist" onclick="toggleWishlist(${product.id})">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            `;
            return card;
        }

        function filterProducts(category) {
            loadProducts(category);
        }

        function searchProducts() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            if (searchTerm.length === 0) {
                loadProducts(currentFilter);
                return;
            }
            
            const filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm) ||
                product.description.toLowerCase().includes(searchTerm) ||
                product.category.toLowerCase().includes(searchTerm) ||
                product.tags.some(tag => tag.toLowerCase().includes(searchTerm))
            );
            
            displaySearchResults(filteredProducts, searchTerm);
        }

        function displaySearchResults(products, searchTerm) {
            productsGrid.innerHTML = '';
            
            if (products.length === 0) {
                productsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
                        <i class="fas fa-search" style="font-size: 64px; color: #ccc; margin-bottom: 20px;"></i>
                        <h3 style="color: #666; margin-bottom: 15px;">Nenhum produto encontrado</h3>
                        <p style="color: #999; margin-bottom: 25px;">N√£o encontramos resultados para "${searchTerm}"</p>
                        <button class="btn btn-primary" onclick="clearSearch()">
                            Limpar Busca
                        </button>
                    </div>
                `;
            } else {
                products.forEach(product => {
                    const productCard = createProductCard(product);
                    productsGrid.appendChild(productCard);
                });
            }
        }

        function clearSearch() {
            searchInput.value = '';
            loadProducts(currentFilter);
        }

        // Cart System (mantenido igual)
        function addToCart(productId) {
            if (!currentUser) {
                showToast('Fa√ßa login para adicionar produtos ao carrinho', 'warning');
                openAccountModal();
                return;
            }

            const product = products.find(p => p.id === productId);
            
            if (!product) {
                showToast('Produto n√£o encontrado', 'error');
                return;
            }

            if (product.stock === 0) {
                showToast('Produto fora de estoque', 'error');
                return;
            }

            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                if (existingItem.quantity >= product.stock) {
                    showToast('Quantidade m√°xima em estoque atingida', 'warning');
                    return;
                }
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1,
                    addedAt: new Date().toISOString()
                });
            }
            
            updateCartCount();
            updateCartModal();
            saveCart();
            
            showToast('Produto adicionado ao carrinho!', 'success');
            
            // Visual feedback
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = '‚úì Adicionado!';
            button.style.background = '#4caf50';
            button.disabled = true;
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '';
                button.disabled = false;
            }, 2000);
        }

        // ... (resto de las funciones del carrito mantenidas igual)

        // User Management (mantenido igual)
        function showLoginForm() {
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('register-form').style.display = 'none';
            document.getElementById('user-profile').style.display = 'none';
        }

        function showRegisterForm() {
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('register-form').style.display = 'block';
            document.getElementById('user-profile').style.display = 'none';
        }

        function showUserProfile() {
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('register-form').style.display = 'none';
            document.getElementById('user-profile').style.display = 'block';
            
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('user-email').textContent = currentUser.email;
        }

        function login() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (!email || !password) {
                showToast('Por favor, preencha email e senha.', 'error');
                return;
            }

            // Check admin users first
            const adminUser = adminUsers.find(user => user.email === email && user.password === password);
            if (adminUser) {
                currentUser = {
                    email: adminUser.email,
                    name: adminUser.name,
                    role: 'admin',
                    loginTime: new Date().toISOString()
                };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showAdminPanel();
                closeAccountModal();
                showToast('Acesso administrativo concedido!', 'success');
                return;
            }

            // Check regular users
            const user = users.find(user => user.email === email && user.password === password);
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showUserProfile();
                closeAccountModal();
                showToast('Login realizado com sucesso!', 'success');
                
                // Add welcome notification
                addNotification('Bem-vindo de volta!', '√â bom ter voc√™ aqui novamente.', 'info');
            } else {
                showToast('Email ou senha incorretos.', 'error');
            }
        }

        function showAdminAccess() {
            const email = prompt('Email administrativo:');
            const password = prompt('Senha administrativa:');
            
            if (email && password) {
                const adminUser = adminUsers.find(user => user.email === email && user.password === password);
                if (adminUser) {
                    currentUser = {
                        email: adminUser.email,
                        name: adminUser.name,
                        role: 'admin',
                        loginTime: new Date().toISOString()
                    };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    showAdminPanel();
                    closeAccountModal();
                    showToast('Acesso administrativo concedido!', 'success');
                } else {
                    showToast('Credenciais inv√°lidas.', 'error');
                }
            }
        }

        function checkAdminAccess() {
            if (currentUser && currentUser.role === 'admin') {
                showAdminPanel();
            }
        }

        function showAdminPanel() {
            adminPanel.style.display = 'block';
            isAdminMode = true;
            showAdminSection('dashboard');
        }

        function hideAdminPanel() {
            adminPanel.style.display = 'none';
            isAdminMode = false;
        }

        // Utility Functions
        function saveProducts() {
            localStorage.setItem('products', JSON.stringify(products));
        }

        function saveCategories() {
            localStorage.setItem('categories', JSON.stringify(categories));
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Funciones placeholder (mantenidas igual)
        function showUserManagement() { showToast('Gest√£o de usu√°rios em desenvolvimento', 'info'); }
        function showOrdersPanel() { showToast('Painel de pedidos em desenvolvimento', 'info'); }
        function showReports() { showToast('Relat√≥rios em desenvolvimento', 'info'); }
        function showOrderHistory() { showToast('Hist√≥rico de pedidos em desenvolvimento', 'info'); }
        function showAddresses() { showToast('Gest√£o de endere√ßos em desenvolvimento', 'info'); }
        function showFavorites() { showToast('Favoritos em desenvolvimento', 'info'); }
        function showSettings() { showToast('Configura√ß√µes em desenvolvimento', 'info'); }
        function viewOrderHistory() { showToast('Hist√≥rico em desenvolvimento', 'info'); }
        function changeDeliveryAddress() { showToast('Altera√ß√£o de endere√ßo em desenvolvimento', 'info'); }
        function toggleWishlist() { showToast('Funcionalidade em desenvolvimento', 'info'); }

        // Las dem√°s funciones (calcularFrete, register, logout, etc.) se mantienen igual
        // ... (c√≥digo existente mantenido)

    </script>
</body>
</html>