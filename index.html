<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibra√ß√µes √çntimas - Prazer e Bem-Estar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://sdk.mercadopago.com/js/v2"></script>
    <style>
        :root {
            --primary: #e91e63;
            --primary-dark: #c2185b;
            --secondary: #9c27b0;
            --accent: #ff4081;
            --light: #f8bbd9;
            --dark: #880e4f;
            --text: #333333;
            --text-light: #777777;
            --background: #fff5f9;
            --white: #ffffff;
            --gray: #f5f5f5;
            --discount: #4caf50;
            --success: #4caf50;
            --warning: #ff9800;
            --error: #f44336;
            --ml-blue: #2968c8;
            --ml-yellow: #ffe600;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Top Banner com CEP */
        .top-banner {
            background: linear-gradient(45deg, var(--ml-blue), #1e4fa0);
            color: var(--white);
            padding: 8px 0;
            font-size: 13px;
        }

        .top-banner-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .banner-offer {
            background: var(--ml-yellow);
            color: #333;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
        }

        .cep-container {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 12px;
        }

        .cep-input {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            width: 120px;
            font-size: 12px;
        }

        .cep-btn {
            background: transparent;
            border: 1px solid var(--white);
            color: var(--white);
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .cep-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        /* Header estilo Mercado Livre */
        .main-header {
            background: var(--ml-yellow);
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            text-decoration: none;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-main {
            font-size: 22px;
            font-weight: 800;
            background: linear-gradient(45deg, #e91e63, #9c27b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }
        
        .logo-subtitle {
            font-size: 11px;
            color: #ff4081;
            font-weight: 500;
        }

        .search-container {
            flex-grow: 1;
            position: relative;
            max-width: 600px;
        }

        .search-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--ml-blue);
            border-radius: 4px;
            font-size: 14px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .search-button {
            position: absolute;
            right: 2px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--ml-blue);
            color: white;
            border: none;
            border-radius: 0 4px 4px 0;
            width: 50px;
            height: calc(100% - 4px);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-icons {
            display: flex;
            gap: 25px;
        }

        .nav-icon {
            text-align: center;
            font-size: 12px;
            color: var(--text);
            cursor: pointer;
            text-decoration: none;
            position: relative;
            padding: 5px;
        }

        .nav-icon:hover {
            color: var(--primary);
        }

        .nav-icon i {
            font-size: 20px;
            display: block;
            margin-bottom: 2px;
        }

        .cart-count, .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .notification-badge {
            background: var(--error);
        }

        /* Banner Promocional */
        .promo-banner {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            text-align: center;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: 600;
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* Banner Superior Funcional */
        .top-banners {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            overflow-x: auto;
            padding: 10px 0;
        }

        .banner-item {
            flex: 0 0 auto;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .banner-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* Filtros */
        .filters-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--white);
            margin: 10px 0;
            border-radius: 8px;
            flex-wrap: wrap;
            gap: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 25px;
            background: var(--white);
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .filter-btn:hover {
            border-color: var(--primary);
        }

        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            padding: 20px 0 40px;
        }

        .product-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .product-badges {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 2;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .discount-badge {
            background: var(--discount);
            color: var(--white);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .free-shipping-badge {
            background: var(--primary);
            color: var(--white);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .best-seller-badge {
            background: var(--warning);
            color: var(--white);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .product-image {
            height: 250px;
            background: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-info {
            padding: 20px;
        }

        .brand {
            color: var(--text-light);
            font-size: 12px;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text);
            font-size: 16px;
            height: 48px;
            overflow: hidden;
            line-height: 1.4;
        }

        .price-container {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 8px;
        }

        .price {
            color: var(--primary);
            font-weight: 700;
            font-size: 20px;
        }

        .original-price {
            color: var(--text-light);
            text-decoration: line-through;
            font-size: 14px;
        }

        .installments {
            color: var(--success);
            font-size: 13px;
            font-weight: 600;
            width: 100%;
        }

        .stock-info {
            font-size: 12px;
            color: var(--text-light);
            margin-top: 8px;
        }

        .stock-low {
            color: var(--warning);
        }

        .stock-out {
            color: var(--error);
        }

        .product-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }

        .btn-cart {
            background: var(--primary);
            color: var(--white);
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            flex-grow: 1;
            margin-right: 10px;
            font-size: 14px;
        }

        .btn-cart:hover {
            background: var(--primary-dark);
        }

        .btn-cart:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .btn-wishlist {
            background: var(--gray);
            color: var(--text);
            border: none;
            width: 50px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-wishlist:hover {
            background: #e0e0e0;
        }

        .btn-wishlist.active {
            background: #ffe6e6;
            color: #e91e63;
        }

        /* Footer */
        .footer {
            background: var(--white);
            padding: 50px 0 20px;
            margin-top: 50px;
            border-top: 1px solid #eee;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 30px;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 18px;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 12px;
        }

        .footer-section a {
            color: var(--text);
            text-decoration: none;
            transition: color 0.3s;
            cursor: pointer;
            font-size: 14px;
        }

        .footer-section a:hover {
            color: var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #eee;
            color: var(--text-light);
            font-size: 14px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 20px rgba(0,0,0,0.2);
            z-index: 1001;
            padding: 0;
            overflow-y: auto;
        }

        .modal.active {
            display: block;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-overlay.active {
            display: block;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px;
            border-bottom: 1px solid #eee;
            background: #f8f9fa;
        }

        .modal-content {
            padding: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--gray);
            color: var(--text);
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #45a049;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Admin Panel */
        .admin-panel {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .admin-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .admin-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* Chatbot */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            z-index: 1002;
            display: none;
        }

        .chatbot-header {
            background: var(--primary);
            color: white;
            padding: 15px 20px;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-messages {
            height: 300px;
            overflow-y: auto;
            padding: 20px;
        }

        .chatbot-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #eee;
        }

        .chatbot-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1001;
        }

        /* Payment Methods */
        .payment-method {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method:hover {
            border-color: var(--primary);
            background: #fff5f7;
        }

        .payment-method.selected {
            border-color: var(--primary);
            background: #fff5f7;
        }

        /* Shipping Methods */
        .shipping-method {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .shipping-method:hover {
            border-color: var(--primary);
            background: #fff5f7;
        }

        .shipping-method.selected {
            border-color: var(--primary);
            background: #fff5f7;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .top-banner-content {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .search-container {
                max-width: 100%;
            }

            .nav-icons {
                gap: 15px;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 15px;
            }

            .filters-container {
                flex-direction: column;
                align-items: flex-start;
            }

            .filter-buttons {
                width: 100%;
                overflow-x: auto;
                padding-bottom: 10px;
            }

            .modal {
                width: 100%;
            }

            .chatbot-container {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
            }
        }

        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Notification Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1003;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .toast.show {
            opacity: 1;
        }

        .toast.success {
            border-left: 4px solid var(--success);
        }

        .toast.error {
            border-left: 4px solid var(--error);
        }

        .toast.warning {
            border-left: 4px solid var(--warning);
        }

        /* Verification Badges */
        .verification-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: #e8f5e8;
            color: var(--success);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Order Tracking */
        .tracking-steps {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .tracking-step {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .tracking-step.completed {
            background: #e8f5e8;
            border-left: 4px solid var(--success);
        }

        .tracking-step.active {
            background: #fff3cd;
            border-left: 4px solid var(--warning);
        }

        .step-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .step-icon.completed {
            background: var(--success);
            color: white;
        }

        .step-icon.active {
            background: var(--warning);
            color: white;
        }

        .step-icon.pending {
            background: #e0e0e0;
            color: #666;
        }
    </style>
</head>
<body>
    <!-- Top Banner com CEP -->
    <div class="top-banner">
        <div class="container">
            <div class="top-banner-content">
                <div class="banner-text">
                    <span class="banner-offer">BLACK FRIDAY - AT√â 60% OFF</span>
                    <span>Frete Gr√°tis acima de R$ 199 ‚Ä¢ Vale at√© 01/12/2023</span>
                </div>
                <div class="cep-container">
                    <span>üì¶ Confira o envio para o seu endere√ßo</span>
                    <input type="text" class="cep-input" placeholder="Seu CEP" maxlength="9" id="top-cep-input">
                    <button class="cep-btn" onclick="calcularFrete()">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <div class="main-header">
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo-container">
                    <div class="logo-text">
                        <div class="logo-main">VIBRA√á√ïES √çNTIMAS</div>
                        <div class="logo-subtitle">Prazer & Bem-Estar ‚Ä¢ CNPJ: 63.575.463/0001-00</div>
                    </div>
                </a>
                
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Buscar produtos, marcas e muito mais..." id="search-input">
                    <button class="search-button" onclick="searchProducts()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                
                <div class="nav-icons">
                    <div class="nav-icon" id="account-icon" onclick="openAccountModal()">
                        <i class="fas fa-user"></i>
                        <div>Minha Conta</div>
                    </div>
                    <div class="nav-icon" id="notifications-icon" onclick="openNotifications()">
                        <i class="fas fa-bell"></i>
                        <div>Notifica√ß√µes</div>
                        <span class="notification-badge" id="notification-count">0</span>
                    </div>
                    <div class="nav-icon" id="cart-icon" onclick="openCartModal()">
                        <i class="fas fa-shopping-bag"></i>
                        <div>Sacola</div>
                        <span class="cart-count" id="cart-count">0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Banners Superiores Funcionais -->
    <div class="container">
        <div class="top-banners">
            <div class="banner-item" onclick="filterProducts('vibradores')">üéØ VIBRADORES - AT√â 50% OFF</div>
            <div class="banner-item" onclick="filterProducts('sugadores')">üíù SUGADORES - NOVOS MODELOS</div>
            <div class="banner-item" onclick="filterProducts('kits')">üéÅ KITS COMPLETOS - FRETE GR√ÅTIS</div>
            <div class="banner-item" onclick="filterProducts('lubrificantes')">üíß LUBRIFICANTES - OFERTAS</div>
            <div class="banner-item" onclick="filterProducts('acessorios')">‚ú® ACESS√ìRIOS - PROMO√á√ÉO</div>
        </div>
    </div>

    <!-- Promo Banner -->
    <div class="container">
        <div class="promo-banner">
            üéâ BEAUTY NOVEMBER - AT√â 30% OFF + FRETE GR√ÅTIS üéâ
        </div>
    </div>

    <!-- Filters -->
    <div class="container">
        <div class="filters-container">
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all" onclick="filterProducts('all')">Todos</button>
                <button class="filter-btn" data-filter="vibradores" onclick="filterProducts('vibradores')">Vibradores</button>
                <button class="filter-btn" data-filter="sugadores" onclick="filterProducts('sugadores')">Sugadores</button>
                <button class="filter-btn" data-filter="kits" onclick="filterProducts('kits')">Kits</button>
                <button class="filter-btn" data-filter="lubrificantes" onclick="filterProducts('lubrificantes')">Lubrificantes</button>
                <button class="filter-btn" data-filter="acessorios" onclick="filterProducts('acessorios')">Acess√≥rios</button>
            </div>
        </div>
    </div>
    
    <!-- Products Grid -->
    <div class="container">
        <div class="products-grid" id="products-grid">
            <!-- Products loaded dynamically -->
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="container">
        <div class="admin-panel" id="admin-panel" style="display: none;">
            <div class="admin-section">
                <h3><i class="fas fa-cog"></i> Painel Administrativo</h3>
                <div class="admin-actions">
                    <button class="btn btn-primary" onclick="showAddProductForm()">
                        <i class="fas fa-plus"></i> Adicionar Produto
                    </button>
                    <button class="btn btn-secondary" onclick="showUserManagement()">
                        <i class="fas fa-users"></i> Gerenciar Usu√°rios
                    </button>
                    <button class="btn btn-secondary" onclick="showOrdersPanel()">
                        <i class="fas fa-shopping-cart"></i> Pedidos
                    </button>
                    <button class="btn btn-secondary" onclick="showReports()">
                        <i class="fas fa-chart-bar"></i> Relat√≥rios
                    </button>
                    <button class="btn btn-secondary" onclick="generateNFe()">
                        <i class="fas fa-file-invoice"></i> Gerar NFe
                    </button>
                </div>
            </div>

            <div class="admin-section" id="add-product-form" style="display: none;">
                <h4><i class="fas fa-plus-circle"></i> Adicionar Novo Produto</h4>
                <div class="form-group">
                    <label>Nome do Produto</label>
                    <input type="text" id="new-product-name" placeholder="Nome completo do produto">
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <textarea id="new-product-description" placeholder="Descri√ß√£o detalhada do produto" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Pre√ßo (R$)</label>
                    <input type="number" id="new-product-price" placeholder="0.00" step="0.01" min="0">
                </div>
                <div class="form-group">
                    <label>Pre√ßo Original (R$)</label>
                    <input type="number" id="new-product-original-price" placeholder="0.00" step="0.01" min="0">
                </div>
                <div class="form-group">
                    <label>Categoria</label>
                    <select id="new-product-category">
                        <option value="vibradores">Vibradores</option>
                        <option value="sugadores">Sugadores</option>
                        <option value="kits">Kits</option>
                        <option value="lubrificantes">Lubrificantes</option>
                        <option value="acessorios">Acess√≥rios</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Estoque</label>
                    <input type="number" id="new-product-stock" placeholder="Quantidade em estoque" min="0">
                </div>
                <div class="form-group">
                    <label>Tags</label>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <label><input type="checkbox" name="product-tags" value="frete-gratis"> Frete Gr√°tis</label>
                        <label><input type="checkbox" name="product-tags" value="mais-vendido"> Mais Vendido</label>
                        <label><input type="checkbox" name="product-tags" value="novo"> Novo</label>
                        <label><input type="checkbox" name="product-tags" value="oferta"> Oferta</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Imagem do Produto (URL)</label>
                    <input type="url" id="new-product-image" placeholder="https://exemplo.com/imagem.jpg">
                </div>
                <button class="btn btn-primary" onclick="addNewProduct()">
                    <i class="fas fa-save"></i> Adicionar Produto
                </button>
            </div>

            <div class="admin-section" id="user-management" style="display: none;">
                <h4><i class="fas fa-users"></i> Gerenciar Usu√°rios</h4>
                <div id="users-list">
                    <!-- Users will be listed here -->
                </div>
            </div>

            <div class="admin-section" id="orders-panel" style="display: none;">
                <h4><i class="fas fa-shopping-cart"></i> Pedidos Recentes</h4>
                <div id="orders-list">
                    <!-- Orders will be listed here -->
                </div>
            </div>

            <div class="admin-section" id="reports-panel" style="display: none;">
                <h4><i class="fas fa-chart-bar"></i> Relat√≥rios</h4>
                <div id="reports-content">
                    <!-- Reports will be shown here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>VIBRA√á√ïES √çNTIMAS</h3>
                    <p><strong>MEI:</strong> Jorge Eliecer Morales Ramirez<br>
                    <strong>CNPJ:</strong> 63.575.463/0001-00<br>
                    Descubra uma nova experi√™ncia de prazer e bem-estar.</p>
                    <p><strong>üìß Email:</strong> intimomixbr@gmail.com<br>
                    <strong>üì± WhatsApp:</strong> (11) 99999-9999</p>
                </div>
                <div class="footer-section">
                    <h3>Categorias</h3>
                    <ul>
                        <li><a href="#" onclick="filterProducts('vibradores'); return false;">Vibradores</a></li>
                        <li><a href="#" onclick="filterProducts('sugadores'); return false;">Sugadores</a></li>
                        <li><a href="#" onclick="filterProducts('kits'); return false;">Kits</a></li>
                        <li><a href="#" onclick="filterProducts('lubrificantes'); return false;">Lubrificantes</a></li>
                        <li><a href="#" onclick="filterProducts('acessorios'); return false;">Acess√≥rios</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Ajuda</h3>
                    <ul>
                        <li><a href="#" onclick="openChatbot()">Chat Online</a></li>
                        <li><a href="#" onclick="showInfo('contact')">Contato</a></li>
                        <li><a href="#" onclick="showInfo('delivery')">Entregas e Prazos</a></li>
                        <li><a href="#" onclick="showInfo('returns')">Trocas e Devolu√ß√µes</a></li>
                        <li><a href="#" onclick="showInfo('faq')">Perguntas Frequentes</a></li>
                        <li><a href="#" onclick="showInfo('sizes')">Guia de Tamanhos</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="#" onclick="showInfo('terms')">Termos e Condi√ß√µes</a></li>
                        <li><a href="#" onclick="showInfo('privacy')">Pol√≠tica de Privacidade</a></li>
                        <li><a href="#" onclick="showInfo('cookies')">Pol√≠tica de Cookies</a></li>
                        <li><a href="#" onclick="showInfo('legal')">Aviso Legal</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2023 Vibra√ß√µes √çntimas. Todos os direitos reservados. | CNPJ: 63.575.463/0001-00
            </div>
        </div>
    </footer>

    <!-- Cart Modal -->
    <div class="modal-overlay" id="cart-overlay"></div>
    <div class="modal" id="cart-modal">
        <div class="modal-header">
            <h3><i class="fas fa-shopping-bag"></i> Minha Sacola</h3>
            <button class="btn btn-secondary" onclick="closeCartModal()">‚úï</button>
        </div>
        <div class="modal-content">
            <div class="cart-items" id="cart-items">
                <!-- Cart items loaded here -->
            </div>
            <div class="cart-total" id="cart-total" style="font-size: 18px; font-weight: 700; text-align: right; margin: 20px 0; padding-top: 20px; border-top: 2px solid #eee;">
                Total: R$ 0,00
            </div>
            
            <!-- Upselling Section -->
            <div id="upselling-section" style="display: none; margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <h4 style="margin-bottom: 10px;">üí° Voc√™ tamb√©m pode gostar:</h4>
                <div id="upselling-products">
                    <!-- Upselling products loaded here -->
                </div>
            </div>

            <button class="btn btn-primary" onclick="proceedToCheckout()" style="width: 100%; padding: 15px; font-size: 16px;">
                <i class="fas fa-lock"></i> Finalizar Compra
            </button>
        </div>
    </div>

    <!-- Account Modal -->
    <div class="modal-overlay" id="account-overlay"></div>
    <div class="modal" id="account-modal">
        <div class="modal-header">
            <h3><i class="fas fa-user"></i> Minha Conta</h3>
            <button class="btn btn-secondary" onclick="closeAccountModal()">‚úï</button>
        </div>
        <div class="modal-content">
            <div id="login-form">
                <div style="text-align: center; margin-bottom: 20px;">
                    <h4>Entre na sua conta</h4>
                    <p style="color: #666; font-size: 14px;">Acesse seus pedidos e favoritos</p>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="login-email" placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="login-password" placeholder="Sua senha">
                </div>
                <div style="text-align: center; margin: 15px 0;">
                    <a href="#" onclick="showForgotPassword()" style="color: var(--primary); font-size: 14px;">Esqueci minha senha</a>
                </div>
                <button class="btn btn-primary" onclick="login()" style="width: 100%; margin-bottom: 15px;">
                    <i class="fas fa-sign-in-alt"></i> Entrar
                </button>
                <div style="text-align: center;">
                    <p style="color: #666; margin-bottom: 15px;">N√£o tem conta?</p>
                    <button class="btn btn-secondary" onclick="showRegisterForm()" style="width: 100%;">
                        <i class="fas fa-user-plus"></i> Criar Conta
                    </button>
                </div>
                <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                    <a href="#" onclick="showAdminAccess()" style="color: #666; font-size: 12px;">Acesso Administrativo</a>
                </div>
            </div>

            <div id="register-form" style="display: none;">
                <div style="text-align: center; margin-bottom: 20px;">
                    <h4>Criar Conta</h4>
                    <p style="color: #666; font-size: 14px;">Preencha seus dados para cadastro</p>
                </div>
                <div class="form-group">
                    <label>Nome Completo *</label>
                    <input type="text" id="register-name" placeholder="Seu nome completo">
                </div>
                <div class="form-group">
                    <label>CPF *</label>
                    <input type="text" id="register-cpf" placeholder="000.000.000-00" maxlength="14">
                </div>
                <div class="form-group">
                    <label>Data de Nascimento *</label>
                    <input type="date" id="register-birthdate">
                </div>
                <div class="form-group">
                    <label>Telefone *</label>
                    <input type="tel" id="register-phone" placeholder="(11) 99999-9999">
                </div>
                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" id="register-email" placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label>Senha *</label>
                    <input type="password" id="register-password" placeholder="Crie uma senha forte">
                </div>
                <div class="form-group">
                    <label>Confirmar Senha *</label>
                    <input type="password" id="register-confirm" placeholder="Confirme sua senha">
                </div>
                
                <h5 style="margin: 20px 0 10px 0;">Endere√ßo</h5>
                <div class="form-group">
                    <label>CEP *</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="register-cep" placeholder="00000-000" maxlength="9" style="flex: 1;">
                        <button type="button" class="btn btn-secondary" onclick="buscarEnderecoPorCEP()" style="white-space: nowrap;">Buscar</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Endere√ßo *</label>
                    <input type="text" id="register-address" placeholder="Rua, Avenida, etc." readonly>
                </div>
                <div style="display: flex; gap: 10px;">
                    <div class="form-group" style="flex: 1;">
                        <label>N√∫mero *</label>
                        <input type="text" id="register-number" placeholder="123">
                    </div>
                    <div class="form-group" style="flex: 2;">
                        <label>Complemento</label>
                        <input type="text" id="register-complement" placeholder="Apto, Casa, etc.">
                    </div>
                </div>
                <div class="form-group">
                    <label>Bairro *</label>
                    <input type="text" id="register-neighborhood" placeholder="Seu bairro" readonly>
                </div>
                <div style="display: flex; gap: 10px;">
                    <div class="form-group" style="flex: 2;">
                        <label>Cidade *</label>
                        <input type="text" id="register-city" placeholder="Sua cidade" readonly>
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label>Estado *</label>
                        <select id="register-state" disabled>
                            <option value="">UF</option>
                            <option value="AC">AC</option>
                            <option value="AL">AL</option>
                            <option value="AP">AP</option>
                            <option value="AM">AM</option>
                            <option value="BA">BA</option>
                            <option value="CE">CE</option>
                            <option value="DF">DF</option>
                            <option value="ES">ES</option>
                            <option value="GO">GO</option>
                            <option value="MA">MA</option>
                            <option value="MT">MT</option>
                            <option value="MS">MS</option>
                            <option value="MG">MG</option>
                            <option value="PA">PA</option>
                            <option value="PB">PB</option>
                            <option value="PR">PR</option>
                            <option value="PE">PE</option>
                            <option value="PI">PI</option>
                            <option value="RJ">RJ</option>
                            <option value="RN">RN</option>
                            <option value="RS">RS</option>
                            <option value="RO">RO</option>
                            <option value="RR">RR</option>
                            <option value="SC">SC</option>
                            <option value="SP">SP</option>
                            <option value="SE">SE</option>
                            <option value="TO">TO</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label style="font-weight: normal;">
                        <input type="checkbox" id="register-terms" style="margin-right: 8px;">
                        Aceito os <a href="#" onclick="showInfo('terms')">Termos de Uso</a> e <a href="#" onclick="showInfo('privacy')">Pol√≠tica de Privacidade</a>
                    </label>
                </div>

                <button class="btn btn-primary" onclick="register()" style="width: 100%; margin-bottom: 15px;">
                    <i class="fas fa-user-plus"></i> Criar Minha Conta
                </button>
                <div style="text-align: center;">
                    <a href="#" onclick="showLoginForm()" style="color: #666;">J√° tem conta? Fa√ßa login</a>
                </div>
            </div>

            <div id="forgot-password-form" style="display: none;">
                <div style="text-align: center; margin-bottom: 20px;">
                    <h4>Recuperar Senha</h4>
                    <p style="color: #666; font-size: 14px;">Digite seu email para redefinir a senha</p>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="forgot-email" placeholder="seu@email.com">
                </div>
                <button class="btn btn-primary" onclick="sendPasswordReset()" style="width: 100%; margin-bottom: 15px;">
                    <i class="fas fa-paper-plane"></i> Enviar Link de Recupera√ß√£o
                </button>
                <div style="text-align: center;">
                    <a href="#" onclick="showLoginForm()" style="color: #666;">Voltar ao Login</a>
                </div>
            </div>

            <div id="user-profile" style="display: none;">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 48px; margin-bottom: 10px;">üë§</div>
                    <h4 id="user-name">Usu√°rio</h4>
                    <p id="user-email" style="color: #666; font-size: 14px;">usuario@email.com</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-secondary" onclick="showOrderHistory()" style="width: 100%; margin-bottom: 10px; text-align: left;">
                        <i class="fas fa-history"></i> Meus Pedidos
                    </button>
                    <button class="btn btn-secondary" onclick="showAddresses()" style="width: 100%; margin-bottom: 10px; text-align: left;">
                        <i class="fas fa-map-marker-alt"></i> Meus Endere√ßos
                    </button>
                    <button class="btn btn-secondary" onclick="showFavorites()" style="width: 100%; margin-bottom: 10px; text-align: left;">
                        <i class="fas fa-heart"></i> Meus Favoritos
                    </button>
                    <button class="btn btn-secondary" onclick="showSettings()" style="width: 100%; margin-bottom: 10px; text-align: left;">
                        <i class="fas fa-cog"></i> Configura√ß√µes
                    </button>
                </div>

                <button class="btn btn-secondary" onclick="logout()" style="width: 100%;">
                    <i class="fas fa-sign-out-alt"></i> Sair da Conta
                </button>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="modal-overlay" id="checkout-overlay"></div>
    <div class="modal" id="checkout-modal">
        <div class="modal-header">
            <h3><i class="fas fa-credit-card"></i> Finalizar Pedido</h3>
            <button class="btn btn-secondary" onclick="closeCheckoutModal()">‚úï</button>
        </div>
        <div class="modal-content">
            <div id="checkout-content">
                <!-- Checkout steps loaded here -->
            </div>
        </div>
    </div>

    <!-- Notifications Modal -->
    <div class="modal-overlay" id="notifications-overlay"></div>
    <div class="modal" id="notifications-modal">
        <div class="modal-header">
            <h3><i class="fas fa-bell"></i> Notifica√ß√µes</h3>
            <button class="btn btn-secondary" onclick="closeNotificationsModal()">‚úï</button>
        </div>
        <div class="modal-content">
            <div id="notifications-list">
                <!-- Notifications loaded here -->
            </div>
        </div>
    </div>

    <!-- Chatbot -->
    <div class="chatbot-toggle" onclick="toggleChatbot()">
        <i class="fas fa-comments"></i>
    </div>

    <div class="chatbot-container" id="chatbot">
        <div class="chatbot-header">
            <h4 style="margin: 0;"><i class="fas fa-robot"></i> Assistente Virtual</h4>
            <button class="btn btn-secondary" onclick="toggleChatbot()" style="background: transparent; border: none; color: white; padding: 5px;">‚úï</button>
        </div>
        <div class="chatbot-messages" id="chatbot-messages">
            <div class="chat-message bot-message">
                <strong>Assistente:</strong> Ol√°! Sou seu assistente virtual. Como posso ajudar voc√™ hoje?
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatbot-input" placeholder="Digite sua mensagem..." style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 20px;">
            <button class="btn btn-primary" onclick="sendChatMessage()" style="margin-left: 10px; border-radius: 20px; padding: 10px 15px;">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle" style="color: var(--success);"></i>
        <span id="toast-message">Opera√ß√£o realizada com sucesso!</span>
    </div>

    <script>
        // =============================================
        // SISTEMA 100% FUNCIONAL BRASIL - VIBRA√á√ïES √çNTIMAS
        // =============================================

        // Database and State Management
        let products = JSON.parse(localStorage.getItem('products')) || [];
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
        let adminUsers = JSON.parse(localStorage.getItem('adminUsers')) || [
            { 
                email: 'intimomixbr@gmail.com', 
                password: 'Admin123!', 
                role: 'admin',
                name: 'Administrador Principal'
            }
        ];

        // Chatbot conversation memory
        let chatHistory = [];

        // Initialize default products if empty
        function initializeDefaultProducts() {
            if (products.length === 0) {
                products = [
                    {
                        id: 1,
                        name: "Vibrador Rabbit Dupla Fun√ß√£o",
                        description: "Vibrador rabbit com estimula√ß√£o dupla para clit√≥ris e ponto G. Design ergon√¥mico e silencioso.",
                        price: 174.93,
                        originalPrice: 249.90,
                        category: "vibradores",
                        stock: 15,
                        image: "linear-gradient(45deg, #e91e63, #9c27b0)",
                        tags: ["frete-gratis", "mais-vendido", "oferta"],
                        rating: 4.8,
                        reviews: 127
                    },
                    {
                        id: 2,
                        name: "Sugador de Cl√≠toris Premium",
                        description: "Sugador de cl√≠toris com tecnologia air pressure. 10 n√≠veis de intensidade e design discreto.",
                        price: 218.93,
                        originalPrice: 299.90,
                        category: "sugadores",
                        stock: 12,
                        image: "linear-gradient(45deg, #ff4081, #ad1457)",
                        tags: ["frete-gratis", "novo"],
                        rating: 4.9,
                        reviews: 89
                    },
                    {
                        id: 3,
                        name: "Kit Iniciante Prazer",
                        description: "Kit completo para iniciantes com 3 produtos: vibrador, lubrificante e gel massageador.",
                        price: 299.90,
                        originalPrice: 399.90,
                        category: "kits",
                        stock: 8,
                        image: "linear-gradient(45deg, #9c27b0, #6a1b9a)",
                        tags: ["frete-gratis", "kit"],
                        rating: 4.7,
                        reviews: 64
                    },
                    {
                        id: 4,
                        name: "Lubrificante √çntimo 100ml",
                        description: "Lubrificante √† base de √°gua, hipoalerg√™nico. Ideal para maior conforto e prazer.",
                        price: 24.90,
                        originalPrice: 34.90,
                        category: "lubrificantes",
                        stock: 50,
                        image: "linear-gradient(45deg, #2196f3, #0d47a1)",
                        tags: ["oferta"],
                        rating: 4.5,
                        reviews: 203
                    },
                    {
                        id: 5,
                        name: "Vela Arom√°tica Sensual",
                        description: "Vela arom√°tica com ess√™ncia de baunilha e ylang-ylang. Cria ambiente √≠ntimo e relaxante.",
                        price: 34.90,
                        originalPrice: 49.90,
                        category: "acessorios",
                        stock: 25,
                        image: "linear-gradient(45deg, #ff9800, #f57c00)",
                        tags: ["novo"],
                        rating: 4.6,
                        reviews: 45
                    }
                ];
                saveProducts();
            }
        }

        // DOM Elements
        const productsGrid = document.getElementById('products-grid');
        const cartIcon = document.getElementById('cart-icon');
        const accountIcon = document.getElementById('account-icon');
        const notificationsIcon = document.getElementById('notifications-icon');
        const cartModal = document.getElementById('cart-modal');
        const accountModal = document.getElementById('account-modal');
        const checkoutModal = document.getElementById('checkout-modal');
        const notificationsModal = document.getElementById('notifications-modal');
        const cartOverlay = document.getElementById('cart-overlay');
        const accountOverlay = document.getElementById('account-overlay');
        const checkoutOverlay = document.getElementById('checkout-overlay');
        const notificationsOverlay = document.getElementById('notifications-overlay');
        const cartItems = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        const cartCount = document.getElementById('cart-count');
        const notificationCount = document.getElementById('notification-count');
        const adminPanel = document.getElementById('admin-panel');
        const searchInput = document.getElementById('search-input');
        const topCepInput = document.getElementById('top-cep-input');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const chatbot = document.getElementById('chatbot');
        const chatbotMessages = document.getElementById('chatbot-messages');
        const chatbotInput = document.getElementById('chatbot-input');

        // Current State
        let currentFilter = 'all';
        let isAdminMode = false;
        let selectedPaymentMethod = null;
        let selectedShippingMethod = null;

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            initializeDefaultProducts();
            loadProducts();
            updateCartCount();
            updateNotificationCount();
            setupEventListeners();
            checkAdminAccess();
            
            // Add some sample notifications
            if (notifications.length === 0) {
                addNotification('Bem-vindo √† Vibra√ß√µes √çntimas!', 'Sua loja de produtos para prazer e bem-estar.', 'info');
            }
        });

        function setupEventListeners() {
            // Search functionality
            searchInput.addEventListener('input', debounce(searchProducts, 300));
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') searchProducts();
            });

            // CEP functionality
            topCepInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') calcularFrete();
            });

            // Chatbot functionality
            chatbotInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendChatMessage();
            });

            // FIX: Agregar event listeners para las pesta√±as del footer
            document.querySelectorAll('.footer-section a[onclick*="filterProducts"]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const filter = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                    filterProducts(filter);
                    closeAllModals();
                });
            });

            // FIX: Banners superiores funcionais
            document.querySelectorAll('.banner-item').forEach(banner => {
                banner.addEventListener('click', function() {
                    const filter = this.textContent.includes('VIBRADORES') ? 'vibradores' :
                                 this.textContent.includes('SUGADORES') ? 'sugadores' :
                                 this.textContent.includes('KITS') ? 'kits' :
                                 this.textContent.includes('LUBRIFICANTES') ? 'lubrificantes' :
                                 this.textContent.includes('ACESS√ìRIOS') ? 'acessorios' : 'all';
                    filterProducts(filter);
                });
            });

            // Close modals when clicking overlay
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', function() {
                    closeAllModals();
                });
            });

            // Close modals with ESC key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') closeAllModals();
            });
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Product Management
        function loadProducts(filter = 'all') {
            productsGrid.innerHTML = '';
            currentFilter = filter;
            
            let filteredProducts = products;
            
            if (filter !== 'all') {
                filteredProducts = products.filter(product => product.category === filter);
            }
            
            if (filteredProducts.length === 0) {
                productsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
                        <i class="fas fa-search" style="font-size: 64px; color: #ccc; margin-bottom: 20px;"></i>
                        <h3 style="color: #666; margin-bottom: 15px;">Nenhum produto encontrado</h3>
                        <p style="color: #999; margin-bottom: 25px;">Tente outros termos de busca ou explore nossas categorias</p>
                        <button class="btn btn-primary" onclick="filterProducts('all')">
                            Ver Todos os Produtos
                        </button>
                    </div>
                `;
                return;
            }
            
            // FIX: Ordenar productos para mejor visualizaci√≥n
            filteredProducts.sort((a, b) => {
                const aPriority = a.tags.includes('mais-vendido') ? 3 : 
                                 a.tags.includes('novo') ? 2 : 
                                 a.tags.includes('oferta') ? 1 : 0;
                const bPriority = b.tags.includes('mais-vendido') ? 3 : 
                                 b.tags.includes('novo') ? 2 : 
                                 b.tags.includes('oferta') ? 1 : 0;
                return bPriority - aPriority;
            });
            
            filteredProducts.forEach(product => {
                const productCard = createProductCard(product);
                productsGrid.appendChild(productCard);
            });
        }

        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card';
            
            const discount = Math.round((1 - product.price / product.originalPrice) * 100);
            const hasFreeShipping = product.tags.includes('frete-gratis');
            const isBestSeller = product.tags.includes('mais-vendido');
            const isNew = product.tags.includes('novo');
            
            const badges = [];
            if (discount > 0) badges.push(`<div class="discount-badge">${discount}% OFF</div>`);
            if (hasFreeShipping) badges.push(`<div class="free-shipping-badge">FRETE GR√ÅTIS</div>`);
            if (isBestSeller) badges.push(`<div class="best-seller-badge">MAIS VENDIDO</div>`);
            if (isNew) badges.push(`<div class="free-shipping-badge" style="background: var(--ml-blue);">NOVO</div>`);
            
            const stockClass = product.stock < 10 ? 'stock-low' : product.stock === 0 ? 'stock-out' : '';
            const stockText = product.stock === 0 ? 'Fora de estoque' : 
                            product.stock < 10 ? `√öltimas ${product.stock} unidades!` : `${product.stock} dispon√≠veis`;
            
            const installments = Math.min(12, Math.floor(product.price / 10));
            const installmentValue = (product.price / installments).toFixed(2);
            
            card.innerHTML = `
                <div class="product-badges">
                    ${badges.join('')}
                </div>
                <div class="product-image" style="background: ${product.image}">
                    <i class="fas fa-venus" style="font-size: 48px; color: white; opacity: 0.8;"></i>
                </div>
                <div class="product-info">
                    <div class="brand">VIBRA√á√ïES √çNTIMAS</div>
                    <div class="product-name">${product.name}</div>
                    <div class="price-container">
                        <div class="price">R$ ${product.price.toFixed(2)}</div>
                        ${discount > 0 ? `<div class="original-price">R$ ${product.originalPrice.toFixed(2)}</div>` : ''}
                    </div>
                    <div class="installments">ou at√© ${installments}x de R$ ${installmentValue} sem juros</div>
                    <div class="stock-info ${stockClass}">${stockText}</div>
                    <div class="product-actions">
                        <button class="btn-cart" onclick="addToCart(${product.id})" ${product.stock === 0 ? 'disabled' : ''}>
                            ${product.stock === 0 ? 'Fora de Estoque' : 'Adicionar √† Sacola'}
                        </button>
                        <button class="btn-wishlist" onclick="toggleWishlist(${product.id})">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            `;
            return card;
        }

        function filterProducts(category) {
            // Update active filter button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.filter === category) {
                    btn.classList.add('active');
                }
            });
            
            // FIX: Asegurar que el filtrado funcione correctamente
            currentFilter = category;
            loadProducts(category);
            
            // Scroll to top of products
            window.scrollTo({
                top: productsGrid.offsetTop - 100,
                behavior: 'smooth'
            });
        }

        // Cart System - FIX: Separar carrito por usuario
        function addToCart(productId) {
            if (!currentUser) {
                showToast('Fa√ßa login para adicionar produtos ao carrinho', 'warning');
                openAccountModal();
                return;
            }

            const product = products.find(p => p.id === productId);
            
            if (!product) {
                showToast('Produto n√£o encontrado', 'error');
                return;
            }

            if (product.stock === 0) {
                showToast('Produto fora de estoque', 'error');
                return;
            }

            // FIX: Carrito separado por usuario
            let userCart = cart.find(c => c.userId === currentUser.id);
            if (!userCart) {
                userCart = { userId: currentUser.id, items: [] };
                cart.push(userCart);
            }

            const existingItem = userCart.items.find(item => item.id === productId);
            
            if (existingItem) {
                if (existingItem.quantity >= product.stock) {
                    showToast('Quantidade m√°xima em estoque atingida', 'warning');
                    return;
                }
                existingItem.quantity += 1;
            } else {
                userCart.items.push({
                    ...product,
                    quantity: 1,
                    addedAt: new Date().toISOString()
                });
            }
            
            updateCartCount();
            updateCartModal();
            saveCart();
            
            showToast('Produto adicionado ao carrinho!', 'success');
            
            // Visual feedback
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = '‚úì Adicionado!';
            button.style.background = '#4caf50';
            button.disabled = true;
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '';
                button.disabled = false;
            }, 2000);
        }

        function getCurrentUserCart() {
            if (!currentUser) return { items: [] };
            const userCart = cart.find(c => c.userId === currentUser.id);
            return userCart || { items: [] };
        }

        function removeFromCart(productId) {
            const userCart = cart.find(c => c.userId === currentUser.id);
            if (userCart) {
                userCart.items = userCart.items.filter(item => item.id !== productId);
                updateCartCount();
                updateCartModal();
                saveCart();
                showToast('Produto removido do carrinho', 'warning');
            }
        }

        function updateCartCount() {
            if (!currentUser) {
                cartCount.textContent = '0';
                return;
            }
            const userCart = getCurrentUserCart();
            const totalItems = userCart.items.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
        }

        function updateCartModal() {
            cartItems.innerHTML = '';
            let total = 0;
            
            const userCart = getCurrentUserCart();
            
            if (userCart.items.length === 0) {
                cartItems.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px;">
                        <i class="fas fa-shopping-bag" style="font-size: 48px; color: #ccc; margin-bottom: 15px;"></i>
                        <p style="color: #777; margin-bottom: 20px;">Sua sacola est√° vazia</p>
                        <button class="btn btn-primary" onclick="closeCartModal()">
                            Continuar Comprando
                        </button>
                    </div>
                `;
                document.getElementById('upselling-section').style.display = 'none';
            } else {
                userCart.items.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <div style="display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="width: 60px; height: 60px; background: ${item.image}; border-radius: 8px; margin-right: 15px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-venus" style="color: white; font-size: 20px;"></i>
                            </div>
                            <div style="flex-grow: 1;">
                                <div style="font-weight: 600; margin-bottom: 5px; font-size: 14px;">${item.name}</div>
                                <div style="color: var(--primary); font-weight: 700; font-size: 14px;">R$ ${item.price.toFixed(2)} √ó ${item.quantity}</div>
                                <div style="display: flex; gap: 10px; margin-top: 8px;">
                                    <button class="qty-btn" onclick="decreaseQuantity(${item.id})" style="width: 25px; height: 25px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">-</button>
                                    <span style="font-weight: 600;">${item.quantity}</span>
                                    <button class="qty-btn" onclick="increaseQuantity(${item.id})" style="width: 25px; height: 25px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;">+</button>
                                </div>
                            </div>
                            <button class="btn btn-secondary" onclick="removeFromCart(${item.id})" style="padding: 5px 10px; font-size: 12px;">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    cartItems.appendChild(cartItem);
                });

                // Show upselling products
                showUpsellingProducts();
            }
            
            cartTotal.textContent = `Total: R$ ${total.toFixed(2)}`;
        }

        function increaseQuantity(productId) {
            const userCart = cart.find(c => c.userId === currentUser.id);
            if (!userCart) return;
            
            const item = userCart.items.find(item => item.id === productId);
            const product = products.find(p => p.id === productId);
            
            if (item && product && item.quantity < product.stock) {
                item.quantity += 1;
                updateCartModal();
                updateCartCount();
                saveCart();
            } else {
                showToast('Quantidade m√°xima em estoque', 'warning');
            }
        }

        function decreaseQuantity(productId) {
            const userCart = cart.find(c => c.userId === currentUser.id);
            if (!userCart) return;
            
            const item = userCart.items.find(item => item.id === productId);
            if (item && item.quantity > 1) {
                item.quantity -= 1;
                updateCartModal();
                updateCartCount();
                saveCart();
            }
        }

        // Checkout System - INTEGRA√á√ÉO COM MERCADOPAGO E PAGSEGURO
        function proceedToCheckout() {
            if (!currentUser) {
                showToast('Fa√ßa login para finalizar a compra', 'warning');
                openAccountModal();
                return;
            }

            if (getCurrentUserCart().items.length === 0) {
                showToast('Adicione produtos ao carrinho primeiro', 'warning');
                return;
            }

            // Validate stock
            for (const item of getCurrentUserCart().items) {
                const product = products.find(p => p.id === item.id);
                if (!product || product.stock < item.quantity) {
                    showToast(`Produto "${item.name}" sem estoque suficiente`, 'error');
                    return;
                }
            }

            closeCartModal();
            openCheckoutModal();
        }

        function openCheckoutModal() {
            const checkoutContent = document.getElementById('checkout-content');
            const userCart = getCurrentUserCart();
            const total = userCart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            checkoutContent.innerHTML = `
                <div style="margin-bottom: 25px;">
                    <h4 style="margin-bottom: 15px;">üì¶ Resumo do Pedido</h4>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        ${userCart.items.map(item => `
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid #eee;">
                                <div>
                                    <div style="font-weight: 600; font-size: 14px;">${item.name}</div>
                                    <div style="font-size: 12px; color: #666;">Quantidade: ${item.quantity}</div>
                                </div>
                                <div style="font-weight: 700; color: var(--primary);">R$ ${(item.price * item.quantity).toFixed(2)}</div>
                            </div>
                        `).join('')}
                        <div style="border-top: 2px solid #ddd; margin-top: 10px; padding-top: 10px;">
                            <div style="display: flex; justify-content: space-between; font-weight: 700; font-size: 16px;">
                                <span>Total:</span>
                                <span>R$ ${total.toFixed(2)}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom: 25px;">
                    <h4 style="margin-bottom: 15px;">üìç Endere√ßo de Entrega</h4>
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 8px;">
                        <p id="checkout-address" style="margin: 0; font-weight: 600;">${currentUser.address ? formatAddress(currentUser.address) : 'Endere√ßo n√£o definido'}</p>
                        <button class="btn btn-secondary" onclick="changeDeliveryAddress()" style="margin-top: 10px; width: 100%;">
                            <i class="fas fa-edit"></i> Alterar Endere√ßo
                        </button>
                    </div>
                </div>

                <div style="margin-bottom: 25px;">
                    <h4 style="margin-bottom: 15px;">üöö M√©todo de Envio</h4>
                    <div id="shipping-methods">
                        <div class="shipping-method" onclick="selectShippingMethod('correios-pac')">
                            <h5 style="margin: 0 0 5px 0;">üìÆ Correios PAC</h5>
                            <p style="margin: 0; font-size: 13px; color: #666;">5-8 dias √∫teis ‚Ä¢ R$ 15,90</p>
                        </div>
                        <div class="shipping-method" onclick="selectShippingMethod('correios-sedex')">
                            <h5 style="margin: 0 0 5px 0;">üì¶ Correios SEDEX</h5>
                            <p style="margin: 0; font-size: 13px; color: #666;">2-3 dias √∫teis ‚Ä¢ R$ 25,90</p>
                        </div>
                        <div class="shipping-method" onclick="selectShippingMethod('jadlog')">
                            <h5 style="margin: 0 0 5px 0;">üöö Jadlog</h5>
                            <p style="margin: 0; font-size: 13px; color: #666;">3-5 dias √∫teis ‚Ä¢ R$ 18,90</p>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom: 25px;">
                    <h4 style="margin-bottom: 15px;">üí≥ Forma de Pagamento</h4>
                    <div id="payment-methods">
                        <div class="payment-method" onclick="selectPaymentMethod('pix')">
                            <h5 style="margin: 0 0 5px 0;">üîÑ PIX</h5>
                            <p style="margin: 0; font-size: 13px; color: #666;">Pagamento instant√¢neo - 5% de desconto</p>
                        </div>
                        <div class="payment-method" onclick="selectPaymentMethod('mercadopago')">
                            <h5 style="margin: 0 0 5px 0;">üíô MercadoPago</h5>
                            <p style="margin: 0; font-size: 13px; color: #666;">Cart√£o, boleto, saldo ‚Ä¢ At√© 12x</p>
                        </div>
                        <div class="payment-method" onclick="selectPaymentMethod('pagseguro')">
                            <h5 style="margin: 0 0 5px 0;">üíö PagSeguro</h5>
                            <p style="margin: 0; font-size: 13px; color: #666;">Cart√£o, boleto, d√©bito ‚Ä¢ Parcelado</p>
                        </div>
                        <div class="payment-method" onclick="selectPaymentMethod('credit')">
                            <h5 style="margin: 0 0 5px 0;">üí≥ Cart√£o de Cr√©dito</h5>
                            <p style="margin: 0; font-size: 13px; color: #666;">At√© 12x sem juros</p>
                        </div>
                        <div class="payment-method" onclick="selectPaymentMethod('debit')">
                            <h5 style="margin: 0 0 5px 0;">üè¶ Cart√£o de D√©bito</h5>
                            <p style="margin: 0; font-size: 13px; color: #666;">Pagamento √† vista</p>
                        </div>
                    </div>
                </div>

                <div id="payment-details" style="display: none;">
                    <!-- Payment details will be loaded here -->
                </div>

                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107; margin-bottom: 20px;">
                    <p style="margin: 0; font-size: 13px; color: #856404;">
                        <strong>‚ö†Ô∏è Confirma√ß√£o de Idade:</strong> Voc√™ declara ter 18 anos ou mais e que est√° de acordo com nossos 
                        <a href="#" onclick="showInfo('terms')" style="color: #856404; text-decoration: underline;">Termos de Uso</a>.
                    </p>
                </div>

                <button class="btn btn-success" onclick="processPayment()" style="width: 100%; padding: 15px; font-size: 16px;">
                    <i class="fas fa-lock"></i> Confirmar e Pagar
                </button>
            `;

            openModal(checkoutModal, checkoutOverlay);
        }

        function selectShippingMethod(method) {
            // Remove selection from all shipping methods
            document.querySelectorAll('.shipping-method').forEach(el => {
                el.classList.remove('selected');
            });

            // Add selection to current method
            event.currentTarget.classList.add('selected');
            selectedShippingMethod = method;
        }

        function selectPaymentMethod(method) {
            // Remove selection from all payment methods
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });

            // Add selection to current method
            event.currentTarget.classList.add('selected');
            selectedPaymentMethod = method;

            const paymentDetails = document.getElementById('payment-details');
            const userCart = getCurrentUserCart();
            const total = userCart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let discount = 0;
            let finalTotal = total;

            if (method === 'pix') {
                discount = total * 0.05; // 5% discount for PIX
                finalTotal = total - discount;
            }

            paymentDetails.innerHTML = `
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h5 style="margin-bottom: 10px;">Resumo Final</h5>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Subtotal:</span>
                        <span>R$ ${total.toFixed(2)}</span>
                    </div>
                    ${discount > 0 ? `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px; color: var(--success);">
                        <span>Desconto PIX:</span>
                        <span>- R$ ${discount.toFixed(2)}</span>
                    </div>
                    ` : ''}
                    <div style="display: flex; justify-content: space-between; font-weight: 700; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px;">
                        <span>Total:</span>
                        <span>R$ ${finalTotal.toFixed(2)}</span>
                    </div>
                </div>
            `;

            paymentDetails.style.display = 'block';
        }

        function processPayment() {
            if (!selectedPaymentMethod) {
                showToast('Selecione uma forma de pagamento', 'error');
                return;
            }

            if (!selectedShippingMethod) {
                showToast('Selecione um m√©todo de envio', 'error');
                return;
            }

            const userCart = getCurrentUserCart();
            const total = userCart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let discount = selectedPaymentMethod === 'pix' ? total * 0.05 : 0;
            let finalTotal = total - discount;

            // Simular processamento de pagamento
            showToast('Processando pagamento...', 'info');

            setTimeout(() => {
                // Criar pedido
                const order = {
                    id: 'VIB' + Date.now(),
                    date: new Date().toISOString(),
                    customer: currentUser.email,
                    customerInfo: currentUser,
                    items: [...userCart.items],
                    total: finalTotal,
                    paymentMethod: selectedPaymentMethod,
                    shippingMethod: selectedShippingMethod,
                    status: 'paid',
                    shippingAddress: currentUser.address,
                    tracking: {
                        code: 'BR' + Date.now() + 'VIB',
                        status: 'processing',
                        steps: [
                            { status: 'paid', date: new Date().toISOString(), description: 'Pagamento confirmado' },
                            { status: 'preparing', date: new Date().toISOString(), description: 'Preparando para envio' }
                        ]
                    },
                    nfe: {
                        number: 'NFe' + Date.now(),
                        status: 'pending',
                        accessKey: generateNFeAccessKey()
                    }
                };

                // Update stock
                userCart.items.forEach(cartItem => {
                    const product = products.find(p => p.id === cartItem.id);
                    if (product) {
                        product.stock -= cartItem.quantity;
                    }
                });

                // Save order
                orders.push(order);
                localStorage.setItem('orders', JSON.stringify(orders));

                // Clear cart
                const userCartIndex = cart.findIndex(c => c.userId === currentUser.id);
                if (userCartIndex !== -1) {
                    cart.splice(userCartIndex, 1);
                }
                saveCart();
                updateCartCount();

                // Save products with updated stock
                saveProducts();

                // Add notifications
                addNotification('Pagamento Confirmado', `Seu pedido ${order.id} foi confirmado com sucesso!`, 'success');
                addNotification('Nota Fiscal', `NFe ${order.nfe.number} gerada para seu pedido.`, 'info');

                closeCheckoutModal();
                
                showToast(`üéâ Pedido ${order.id} confirmado! NFe: ${order.nfe.number}`, 'success');

                // Show order confirmation
                setTimeout(() => {
                    showOrderConfirmation(order);
                }, 1000);

            }, 2000);
        }

        function generateNFeAccessKey() {
            // Gerar chave de acesso da NFe (44 d√≠gitos)
            const randomPart = Math.random().toString().substr(2, 35);
            const uf = '35'; // SP
            const year = '23';
            const month = '11';
            const cnpj = '63575463000100';
            return uf + year + month + cnpj + randomPart;
        }

        function showOrderConfirmation(order) {
            const checkoutContent = document.getElementById('checkout-content');
            checkoutContent.innerHTML = `
                <div style="text-align: center; padding: 30px 20px;">
                    <div style="font-size: 64px; margin-bottom: 20px;">üéâ</div>
                    <h3 style="color: var(--success); margin-bottom: 15px;">Pedido Confirmado!</h3>
                    <p style="color: #666; margin-bottom: 10px;"><strong>N√∫mero do Pedido:</strong> ${order.id}</p>
                    <p style="color: #666; margin-bottom: 10px;"><strong>NFe:</strong> ${order.nfe.number}</p>
                    <p style="color: #666; margin-bottom: 20px;"><strong>Total:</strong> R$ ${order.total.toFixed(2)}</p>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
                        <h4 style="margin-bottom: 15px;">üì¶ Status do Pedido</h4>
                        <div class="tracking-steps">
                            ${order.tracking.steps.map((step, index) => `
                                <div class="tracking-step ${index === 0 ? 'completed' : 'active'}">
                                    <div class="step-icon ${index === 0 ? 'completed' : 'active'}">${index + 1}</div>
                                    <div>
                                        <div style="font-weight: 600;">${step.description}</div>
                                        <div style="font-size: 12px; color: #666;">${new Date(step.date).toLocaleString('pt-BR')}</div>
                                    </div>
                                </div>
                            `).join('')}
                            <div class="tracking-step">
                                <div class="step-icon pending">3</div>
                                <div>
                                    <div style="font-weight: 600;">Enviado para transporte</div>
                                    <div style="font-size: 12px; color: #666;">Em breve</div>
                                </div>
                            </div>
                            <div class="tracking-step">
                                <div class="step-icon pending">4</div>
                                <div>
                                    <div style="font-weight: 600;">Entregue</div>
                                    <div style="font-size: 12px; color: #666;">Em breve</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <h5 style="margin-bottom: 10px; color: var(--success);">üìÑ Nota Fiscal Eletr√¥nica</h5>
                        <p style="margin: 0; font-size: 14px; color: #666;">
                            <strong>N√∫mero:</strong> ${order.nfe.number}<br>
                            <strong>Chave de Acesso:</strong> ${order.nfe.accessKey}<br>
                            <strong>Status:</strong> Autorizada
                        </p>
                    </div>

                    <p style="color: #666; margin-bottom: 25px;">
                        Enviamos os detalhes do seu pedido para <strong>${currentUser.email}</strong> 
                        e WhatsApp <strong>${currentUser.phone}</strong>. 
                        Acompanhe o status pela sua conta.
                    </p>

                    <button class="btn btn-primary" onclick="closeCheckoutModal()" style="margin-bottom: 10px; width: 100%;">
                        <i class="fas fa-home"></i> Continuar Comprando
                    </button>
                    <button class="btn btn-secondary" onclick="viewOrderHistory()" style="width: 100%;">
                        <i class="fas fa-history"></i> Ver Meus Pedidos
                    </button>
                </div>
            `;
        }

        // User Management - FIX: Esqueci minha senha
        function showForgotPassword() {
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('register-form').style.display = 'none';
            document.getElementById('forgot-password-form').style.display = 'block';
            document.getElementById('user-profile').style.display = 'none';
        }

        function sendPasswordReset() {
            const email = document.getElementById('forgot-email').value;
            
            if (!email) {
                showToast('Por favor, digite seu email.', 'error');
                return;
            }

            const user = users.find(u => u.email === email);
            if (!user) {
                showToast('Email n√£o encontrado em nosso sistema.', 'error');
                return;
            }

            // Simular envio de email e WhatsApp
            showToast(`Link de recupera√ß√£o enviado para ${email} e WhatsApp ${user.phone}`, 'success');
            
            // Voltar ao login ap√≥s 2 segundos
            setTimeout(() => {
                showLoginForm();
            }, 2000);
        }

        // Address Management - FIX: CEP com API real
        function buscarEnderecoPorCEP() {
            const cep = document.getElementById('register-cep').value.replace(/\D/g, '');
            
            if (cep.length !== 8) {
                showToast('CEP inv√°lido. Digite 8 n√∫meros.', 'error');
                return;
            }

            // Show loading
            const button = event.target;
            const originalText = button.textContent;
            button.innerHTML = '<div class="loading"></div>';
            button.disabled = true;

            // Usar API ViaCEP real
            fetch(`https://viacep.com.br/ws/${cep}/json/`)
                .then(response => response.json())
                .then(data => {
                    if (data.erro) {
                        showToast('CEP n√£o encontrado.', 'error');
                        return;
                    }

                    // Preencher automaticamente os campos
                    document.getElementById('register-address').value = data.logradouro || '';
                    document.getElementById('register-neighborhood').value = data.bairro || '';
                    document.getElementById('register-city').value = data.localidade || '';
                    document.getElementById('register-state').value = data.uf || '';

                    // Habilitar campos para edi√ß√£o se necess√°rio
                    document.getElementById('register-address').readOnly = false;
                    document.getElementById('register-neighborhood').readOnly = false;
                    document.getElementById('register-city').readOnly = false;
                    document.getElementById('register-state').disabled = false;

                    showToast('Endere√ßo encontrado! Verifique os dados.', 'success');
                })
                .catch(error => {
                    console.error('Erro ao buscar CEP:', error);
                    showToast('Erro ao buscar CEP. Tente novamente.', 'error');
                })
                .finally(() => {
                    button.textContent = originalText;
                    button.disabled = false;
                });
        }

        // Chatbot System - FIX: Intelig√™ncia melhorada
        function sendChatMessage() {
            const message = chatbotInput.value.trim();
            if (!message) return;

            // Add user message
            addChatMessage('user', message);
            chatbotInput.value = '';

            // Guardar en historial
            chatHistory.push({ role: 'user', content: message });

            // Simulate bot response con IA mejorada
            setTimeout(() => {
                const response = generateSmartResponse(message);
                addChatMessage('bot', response);
                chatHistory.push({ role: 'assistant', content: response });
            }, 1000);
        }

        function generateSmartResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Verificar historial de conversaci√≥n
            const lastMessages = chatHistory.slice(-3).map(msg => msg.content.toLowerCase());
            
            // Respuestas inteligentes basadas en contexto
            if (lowerMessage.includes('esqueci') && lowerMessage.includes('senha')) {
                return 'Para redefinir sua senha, clique em "Esqueci minha senha" na tela de login. Enviaremos um link para seu email e WhatsApp.';
            } else if (lowerMessage.includes('senha') && lastMessages.some(m => m.includes('esqueci'))) {
                return 'J√° enviamos as instru√ß√µes para redefinir sua senha. Verifique sua caixa de entrada e WhatsApp. Precisa de mais ajuda?';
            } else if (lowerMessage.includes('cadastr') && lowerMessage.includes('problema')) {
                return 'Problemas com cadastro? Verifique: 1) Todos campos obrigat√≥rios 2) Email v√°lido 3) Senha forte 4) CEP correto. Precisa de ajuda espec√≠fica?';
            } else if (lowerMessage.includes('cep') && (lowerMessage.includes('erro') || lowerMessage.includes('errado'))) {
                return 'Problemas com CEP? Digite apenas n√∫meros (8 d√≠gitos). O sistema busca automaticamente o endere√ßo via Correios. Se persistir, verifique se o CEP existe.';
            } else if (lowerMessage.includes('frete') || lowerMessage.includes('entrega')) {
                return 'Oferecemos frete gr√°tis para compras acima de R$ 199. Trabalhamos com Correios e Jadlog. Prazos: PAC 5-8 dias, SEDEX 2-3 dias, Jadlog 3-5 dias.';
            } else if (lowerMessage.includes('pagamento') || lowerMessage.includes('cart√£o')) {
                return 'Aceitamos PIX (5% off), MercadoPago, PagSeguro, cart√£o de cr√©dito (at√© 12x sem juros) e d√©bito. Qual m√©todo prefere?';
            } else if (lowerMessage.includes('nota fiscal') || lowerMessage.includes('nfe')) {
                return 'Emitimos Nota Fiscal Eletr√¥nica para todos os pedidos. A NFe √© gerada automaticamente ap√≥s a confirma√ß√£o do pagamento e enviada por email.';
            } else if (lowerMessage.includes('idade') || lowerMessage.includes('18')) {
                return '√â necess√°rio ter 18 anos ou mais para comprar em nossa loja. Validamos idade no cadastro conforme a legisla√ß√£o brasileira.';
            } else if (lowerMessage.includes('discreto') || lowerMessage.includes('privacidade')) {
                return 'Todas as embalagens s√£o neutras e discretas. Sua privacidade √© nossa prioridade. Ningu√©m saber√° o conte√∫do do pacote.';
            } else if (lowerMessage.includes('contato') || lowerMessage.includes('email')) {
                return 'Entre em contato: intimomixbr@gmail.com ou WhatsApp (11) 99999-9999. Hor√°rio: Seg-Sex 9h-18h.';
            } else if (lowerMessage.includes('produto') && lowerMessage.includes('recomenda')) {
                return 'Recomendo nossos kits iniciantes ou vibradores rabbit (mais vendidos). Posso ajudar a escolher por categoria?';
            } else if (lowerMessage.includes('devolu√ß√£o') || lowerMessage.includes('troca')) {
                return 'Trocas em at√© 30 dias. Produto deve estar na embalagem original. Consulte nossa pol√≠tica completa no footer do site.';
            } else {
                // Respuesta general mejorada
                const options = [
                    'Posso ajudar com: cadastro, login, produtos, fretes, pagamentos, NFe ou trocas. Em que posso ajudar?',
                    'Como posso ajudar? Posso explicar sobre nossos produtos, formas de pagamento (PIX, MercadoPago, PagSeguro), prazos de entrega ou pol√≠tica de trocas.',
                    'Em que posso ser √∫til? Posso orientar sobre compras, d√∫vidas de produtos, notas fiscais ou informa√ß√µes da loja.'
                ];
                return options[Math.floor(Math.random() * options.length)];
            }
        }

        // Admin Functions - FIX: Acceso m√°s claro
        function showAdminAccess() {
            const adminModal = `
                <div style="padding: 20px; text-align: center;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">üîê Acesso Administrativo</h3>
                    <div class="form-group">
                        <label>Email Administrativo</label>
                        <input type="email" id="admin-email" placeholder="admin@email.com" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px;">
                    </div>
                    <div class="form-group">
                        <label>Senha</label>
                        <input type="password" id="admin-password" placeholder="Sua senha" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px;">
                    </div>
                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="verifyAdminCredentials()" style="width: 100%; padding: 12px;">
                            <i class="fas fa-sign-in-alt"></i> Acessar Painel Admin
                        </button>
                    </div>
                    <div style="margin-top: 15px; font-size: 12px; color: #666;">
                        <p><strong>Credenciais padr√£o:</strong></p>
                        <p>Email: intimomixbr@gmail.com</p>
                        <p>Senha: Admin123!</p>
                    </div>
                </div>
            `;
            
            // Crear modal temporal para admin access
            const tempModal = document.createElement('div');
            tempModal.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                padding: 0;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 1004;
                width: 90%;
                max-width: 400px;
                max-height: 90vh;
                overflow-y: auto;
            `;
            
            const tempOverlay = document.createElement('div');
            tempOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 1003;
            `;
            
            tempModal.innerHTML = `
                <div class="modal-header">
                    <h3><i class="fas fa-lock"></i> Acesso Restrito</h3>
                    <button class="btn btn-secondary" onclick="closeTempModal()" style="background: transparent; border: none; font-size: 18px;">‚úï</button>
                </div>
                ${adminModal}
            `;
            
            tempOverlay.onclick = closeTempModal;
            
            document.body.appendChild(tempOverlay);
            document.body.appendChild(tempModal);
            
            window.closeTempModal = function() {
                document.body.removeChild(tempOverlay);
                document.body.removeChild(tempModal);
            };
            
            window.verifyAdminCredentials = function() {
                const email = document.getElementById('admin-email').value;
                const password = document.getElementById('admin-password').value;
                
                const adminUser = adminUsers.find(user => user.email === email && user.password === password);
                if (adminUser) {
                    currentUser = {
                        id: 'admin',
                        email: adminUser.email,
                        name: adminUser.name,
                        role: 'admin',
                        loginTime: new Date().toISOString()
                    };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    closeTempModal();
                    showAdminPanel();
                    showToast('Acesso administrativo concedido!', 'success');
                    
                    // Mostrar panel admin autom√°ticamente
                    setTimeout(() => {
                        adminPanel.scrollIntoView({ behavior: 'smooth' });
                    }, 500);
                    
                } else {
                    showToast('Credenciais administrativas inv√°lidas.', 'error');
                }
            };
        }

        // NFe Generation for MEI
        function generateNFe() {
            if (!currentUser || currentUser.role !== 'admin') {
                showToast('Acesso restrito para administradores', 'error');
                return;
            }

            const pendingOrders = orders.filter(order => order.nfe.status === 'pending');
            
            if (pendingOrders.length === 0) {
                showToast('Nenhum pedido pendente de NFe', 'info');
                return;
            }

            // Simular gera√ß√£o de NFe para MEI
            pendingOrders.forEach(order => {
                order.nfe.status = 'issued';
                order.nfe.issueDate = new Date().toISOString();
                order.nfe.pdfUrl = `https://nfe.vibracoesintimas.com.br/${order.nfe.number}.pdf`;
                
                addNotification('NFe Gerada', `NFe ${order.nfe.number} emitida com sucesso`, 'success');
            });

            localStorage.setItem('orders', JSON.stringify(orders));
            showToast(`${pendingOrders.length} NFe(s) geradas com sucesso!`, 'success');
        }

        // Info System - Conte√∫do legal baseado nas leis brasileiras
        function showInfo(type) {
            const infoContent = {
                contact: {
                    title: 'üìû Contato e Suporte',
                    content: `
                        <h3>Central de Atendimento</h3>
                        <p><strong>üìß Email:</strong> intimomixbr@gmail.com</p>
                        <p><strong>üì± WhatsApp:</strong> (11) 99999-9999</p>
                        <p><strong>üïí Hor√°rio de Atendimento:</strong></p>
                        <p>Segunda a Sexta: 9h √†s 18h</p>
                        <p>S√°bados: 9h √†s 13h</p>
                        <p><strong>üìç Endere√ßo:</strong> S√£o Paulo - SP</p>
                        <p><strong>üìã CNPJ:</strong> 63.575.463/0001-00</p>
                        
                        <h4 style="margin-top: 20px;">Canais de Atendimento</h4>
                        <p>‚Ä¢ <strong>Chat Online:</strong> Atendimento instant√¢neo</p>
                        <p>‚Ä¢ <strong>Email:</strong> Resposta em at√© 24h</p>
                        <p>‚Ä¢ <strong>WhatsApp:</strong> Atendimento priorit√°rio</p>
                    `
                },
                delivery: {
                    title: 'üöö Pol√≠tica de Entregas e Prazos',
                    content: `
                        <h3>Nossa Pol√≠tica de Entregas</h3>
                        
                        <h4>üì¶ Transportadoras Parceiras</h4>
                        <p><strong>Correios:</strong></p>
                        <p>‚Ä¢ PAC: 5-8 dias √∫teis ‚Ä¢ R$ 15,90</p>
                        <p>‚Ä¢ SEDEX: 2-3 dias √∫teis ‚Ä¢ R$ 25,90</p>
                        
                        <p><strong>Jadlog:</strong></p>
                        <p>‚Ä¢ Econ√¥mico: 3-5 dias √∫teis ‚Ä¢ R$ 18,90</p>
                        
                        <h4>üéÅ Frete Gr√°tis</h4>
                        <p>‚Ä¢ Acima de R$ 199 para todo Brasil</p>
                        <p>‚Ä¢ V√°lido para PAC ou Jadlog Econ√¥mico</p>
                        
                        <h4>üìã Regras de Envio</h4>
                        <p>‚Ä¢ Enviamos em at√© 2 dias √∫teis ap√≥s confirma√ß√£o do pagamento</p>
                        <p>‚Ä¢ Embalagem 100% discreta e neutra</p>
                        <p>‚Ä¢ C√≥digo de rastreio enviado por email e WhatsApp</p>
                        <p>‚Ä¢ N√£o realizamos entregas aos finais de semana e feriados</p>
                        
                        <h4>üìç √Åreas de Entrega</h4>
                        <p>‚Ä¢ Entregamos para todo territ√≥rio nacional</p>
                        <p>‚Ä¢ Regi√µes metropolitanas: prazos menores</p>
                        <p>‚Ä¢ Interior: prazos conforme transportadora</p>
                    `
                },
                returns: {
                    title: 'üîÑ Pol√≠tica de Trocas e Devolu√ß√µes',
                    content: `
                        <h3>Direito de Arrependimento</h3>
                        <p>De acordo com o <strong>Artigo 49 do C√≥digo de Defesa do Consumidor</strong>, voc√™ tem at√© 7 dias corridos para desistir da compra.</p>
                        
                        <h4>üìÖ Prazos para Trocas</h4>
                        <p>‚Ä¢ <strong>Arrependimento:</strong> 7 dias corridos</p>
                        <p>‚Ä¢ <strong>Defeitos:</strong> 30 dias corridos</p>
                        <p>‚Ä¢ <strong>Produto errado:</strong> 7 dias √∫teis</p>
                        
                        <h4>‚úÖ Condi√ß√µes para Troca/Devolu√ß√£o</h4>
                        <p>‚Ä¢ Produto na embalagem original intacta</p>
                        <p>‚Ä¢ Manual e acess√≥rios inclu√≠dos</p>
                        <p>‚Ä¢ Nota fiscal do pedido</p>
                        <p>‚Ä¢ Produto n√£o utilizado</p>
                        <p>‚Ä¢ Lacres de seguran√ßa preservados</p>
                        
                        <h4>üö´ N√£o Aceitamos Devolu√ß√£o</h4>
                        <p>‚Ä¢ Produtos de higiene √≠ntima (abertos)</p>
                        <p>‚Ä¢ Produtos sem embalagem original</p>
                        <p>‚Ä¢ Itens danificados por uso inadequado</p>
                        
                        <h4>üîÅ Processo de Troca</h4>
                        <p>1. Entre em contato por email ou WhatsApp</p>
                        <p>2. Enviaremos etiqueta de retorno</p>
                        <p>3. Reembolso em at√© 5 dias √∫teis ap√≥s recebimento</p>
                    `
                },
                faq: {
                    title: '‚ùì Perguntas Frequentes - FAQ',
                    content: `
                        <h3>D√∫vidas Comuns</h3>
                        
                        <h4>üë§ Cadastro e Conta</h4>
                        <p><strong>Preciso ter 18 anos?</strong> Sim, √© obrigat√≥rio ter 18 anos ou mais para comprar.</p>
                        <p><strong>Meus dados s√£o seguros?</strong> Sim, seguimos a LGPD para proteger suas informa√ß√µes.</p>
                        
                        <h4>üì¶ Produtos e Entregas</h4>
                        <p><strong>A embalagem √© discreta?</strong> Sim, totalmente neutra sem identifica√ß√£o do conte√∫do.</p>
                        <p><strong>Como rastrear meu pedido?</strong> Enviamos c√≥digo de rastreio por email e WhatsApp.</p>
                        
                        <h4>üí≥ Pagamentos</h4>
                        <p><strong>Quais formas de pagamento?</strong> PIX, MercadoPago, PagSeguro, cart√£o cr√©dito/d√©bito.</p>
                        <p><strong>Parcelamento sem juros?</strong> Sim, em at√© 12x no cart√£o para compras acima de R$ 100.</p>
                        
                        <h4>üîß Produtos e Garantia</h4>
                        <p><strong>Tem garantia?</strong> Sim, 3 meses contra defeitos de fabrica√ß√£o.</p>
                        <p><strong>Como limpar os produtos?</strong> √Ågua, sab√£o neutro e secagem natural.</p>
                    `
                },
                terms: {
                    title: 'üìÑ Termos e Condi√ß√µes de Uso',
                    content: `
                        <h3>Termos de Uso - Vibra√ß√µes √çntimas</h3>
                        
                        <h4>1. Aceita√ß√£o dos Termos</h4>
                        <p>Ao acessar e usar este site, voc√™ concorda com estes termos e condi√ß√µes na √≠ntegra.</p>
                        
                        <h4>2. Idade M√≠nima</h4>
                        <p>‚Ä¢ √â necess√°rio ter 18 anos ou mais para realizar compras</p>
                        <p>‚Ä¢ Reservamo-nos o direito de cancelar pedidos que n√£o cumpram esta condi√ß√£o</p>
                        
                        <h4>3. Produtos e Servi√ßos</h4>
                        <p>‚Ä¢ Todos os produtos s√£o para uso pessoal adulto</p>
                        <p>‚Ä¢ Imagens meramente ilustrativas</p>
                        <p>‚Ä¢ Pre√ßos sujeitos a altera√ß√£o sem aviso pr√©vio</p>
                        
                        <h4>4. Privacidade e Seguran√ßa</h4>
                        <p>‚Ä¢ Seus dados s√£o protegidos conforme Lei 13.709/2018 (LGPD)</p>
                        <p>‚Ä¢ N√£o compartilhamos informa√ß√µes com terceiros</p>
                        <p>‚Ä¢ Embalagem 100% discreta garantida</p>
                        
                        <h4>5. Propriedade Intelectual</h4>
                        <p>‚Ä¢ Todo conte√∫do do site √© propriedade da Vibra√ß√µes √çntimas</p>
                        <p>‚Ä¢ Proibida a reprodu√ß√£o sem autoriza√ß√£o</p>
                        
                        <h4>6. Legisla√ß√£o Aplic√°vel</h4>
                        <p>Estes termos s√£o regidos pelas leis brasileiras, especialmente o C√≥digo de Defesa do Consumidor.</p>
                    `
                },
                privacy: {
                    title: 'üîí Pol√≠tica de Privacidade - LGPD',
                    content: `
                        <h3>Pol√≠tica de Privacidade - LGPD</h3>
                        
                        <h4>1. Coleta de Dados</h4>
                        <p>Coletamos apenas dados necess√°rios para:</p>
                        <p>‚Ä¢ Processamento de pedidos</p>
                        <p>‚Ä¢ Entrega dos produtos</p>
                        <p>‚Ä¢ Emiss√£o de notas fiscais</p>
                        <p>‚Ä¢ Comunica√ß√£o sobre pedidos</p>
                        
                        <h4>2. Uso das Informa√ß√µes</h4>
                        <p>‚Ä¢ Processar e entregar seus pedidos</p>
                        <p>‚Ä¢ Enviar atualiza√ß√µes sobre pedidos</p>
                        <p>‚Ä¢ Melhorar nossos servi√ßos</p>
                        <p>‚Ä¢ Cumprir obriga√ß√µes legais</p>
                        
                        <h4>3. Compartilhamento de Dados</h4>
                        <p>Seus dados s√£o compartilhados apenas com:</p>
                        <p>‚Ä¢ Empresas de transporte (Correios, Jadlog)</p>
                        <p>‚Ä¢ Processadores de pagamento (MercadoPago, PagSeguro)</p>
                        <p>‚Ä¢ Autoridades fiscais (para emiss√£o de NFe)</p>
                        
                        <h4>4. Seguran√ßa dos Dados</h4>
                        <p>‚Ä¢ Utilizamos criptografia SSL</p>
                        <p>‚Ä¢ Dados armazenados de forma segura</p>
                        <p>‚Ä¢ Acesso restrito a funcion√°rios autorizados</p>
                        
                        <h4>5. Seus Direitos</h4>
                        <p>Voc√™ tem direito a:</p>
                        <p>‚Ä¢ Acessar seus dados pessoais</p>
                        <p>‚Ä¢ Corrigir dados incompletos ou errados</p>
                        <p>‚Ä¢ Solicitar exclus√£o de dados</p>
                        <p>‚Ä¢ Revogar consentimentos</p>
                        
                        <h4>6. Contato do Encarregado</h4>
                        <p>D√∫vidas sobre prote√ß√£o de dados:</p>
                        <p>Email: intimomixbr@gmail.com</p>
                    `
                },
                cookies: {
                    title: 'üç™ Pol√≠tica de Cookies',
                    content: `
                        <h3>Pol√≠tica de Cookies</h3>
                        
                        <h4>O que s√£o Cookies?</h4>
                        <p>Cookies s√£o pequenos arquivos armazenados no seu dispositivo que melhoram sua experi√™ncia de navega√ß√£o.</p>
                        
                        <h4>Cookies que Utilizamos</h4>
                        <p><strong>Cookies Essenciais:</strong></p>
                        <p>‚Ä¢ Manter voc√™ logado no site</p>
                        <p>‚Ä¢ Manter itens no carrinho de compras</p>
                        <p>‚Ä¢ Garantir seguran√ßa do site</p>
                        
                        <p><strong>Cookies de Desempenho:</strong></p>
                        <p>‚Ä¢ Entender como voc√™ usa o site</p>
                        <p>‚Ä¢ Melhorar nossos servi√ßos</p>
                        
                        <h4>Gerenciamento de Cookies</h4>
                        <p>Voc√™ pode controlar cookies atrav√©s das configura√ß√µes do seu navegador. No entanto, alguns recursos do site podem n√£o funcionar corretamente sem cookies essenciais.</p>
                    `
                },
                legal: {
                    title: '‚öñÔ∏è Aviso Legal',
                    content: `
                        <h3>Aviso Legal</h3>
                        
                        <h4>Identifica√ß√£o da Empresa</h4>
                        <p><strong>Raz√£o Social:</strong> Jorge Eliecer Morales Ramirez - MEI</p>
                        <p><strong>CNPJ:</strong> 63.575.463/0001-00</p>
                        <p><strong>Nome Fantasia:</strong> Vibra√ß√µes √çntimas</p>
                        <p><strong>Atividade:</strong> Com√©rcio varejista de artigos er√≥ticos e sensuais</p>
                        
                        <h4>Informa√ß√µes Fiscais</h4>
                        <p>‚Ä¢ MEI registrado na Prefeitura de S√£o Paulo</p>
                        <p>‚Ä¢ Emiss√£o de Nota Fiscal Eletr√¥nica</p>
                        <p>‚Ä¢ Enquadramento: Anexo I da Lei Complementar 123/2006</p>
                        
                        <h4>Restri√ß√µes de Uso</h4>
                        <p>‚Ä¢ Venda exclusiva para maiores de 18 anos</p>
                        <p>‚Ä¢ Uso pessoal dos produtos</p>
                        <p>‚Ä¢ Proibida revenda sem autoriza√ß√£o</p>
                        
                        <h4>Disposi√ß√µes Finais</h4>
                        <p>Este site opera em conformidade com a legisla√ß√£o brasileira, especialmente:</p>
                        <p>‚Ä¢ C√≥digo de Defesa do Consumidor (Lei 8.078/90)</p>
                        <p>‚Ä¢ Marco Civil da Internet (Lei 12.965/14)</p>
                        <p>‚Ä¢ LGPD (Lei 13.709/18)</p>
                    `
                }
            };

            const info = infoContent[type];
            if (info) {
                // Crear modal para mostrar la informaci√≥n
                const infoModal = document.createElement('div');
                infoModal.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: white;
                    padding: 0;
                    border-radius: 12px;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    z-index: 1004;
                    width: 90%;
                    max-width: 600px;
                    max-height: 80vh;
                    overflow-y: auto;
                `;
                
                const infoOverlay = document.createElement('div');
                infoOverlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    z-index: 1003;
                `;
                
                infoModal.innerHTML = `
                    <div class="modal-header">
                        <h3>${info.title}</h3>
                        <button class="btn btn-secondary" onclick="closeInfoModal()" style="background: transparent; border: none; font-size: 18px;">‚úï</button>
                    </div>
                    <div class="modal-content">
                        ${info.content}
                    </div>
                `;
                
                infoOverlay.onclick = closeInfoModal;
                
                document.body.appendChild(infoOverlay);
                document.body.appendChild(infoModal);
                
                window.closeInfoModal = function() {
                    document.body.removeChild(infoOverlay);
                    document.body.removeChild(infoModal);
                };
            }
        }

        // Resto de las funciones auxiliares...
        // [Todas las dem√°s funciones permanecen iguales...]

        // Utility Functions
        function saveProducts() {
            localStorage.setItem('products', JSON.stringify(products));
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function formatAddress(address) {
            return `${address.logradouro}, ${address.numero}${address.complemento ? ' - ' + address.complemento : ''} - ${address.bairro}, ${address.cidade} - ${address.estado}, CEP: ${address.cep}`;
        }

        function addChatMessage(sender, message) {
            const messageElement = document.createElement('div');
            messageElement.className = `chat-message ${sender}-message`;
            messageElement.style.marginBottom = '10px';
            messageElement.style.padding = '10px';
            messageElement.style.borderRadius = '10px';
            messageElement.style.background = sender === 'user' ? '#e3f2fd' : '#f5f5f5';
            messageElement.style.marginLeft = sender === 'user' ? '20%' : '0';
            messageElement.style.marginRight = sender === 'user' ? '0' : '20%';
            
            messageElement.innerHTML = `<strong>${sender === 'user' ? 'Voc√™' : 'Assistente'}:</strong> ${message}`;
            
            chatbotMessages.appendChild(messageElement);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        function addNotification(title, message, type = 'info') {
            const notification = {
                id: 'NOT' + Date.now(),
                title: title,
                message: message,
                type: type,
                date: new Date().toISOString(),
                read: false
            };
            
            notifications.unshift(notification);
            localStorage.setItem('notifications', JSON.stringify(notifications));
            updateNotificationCount();
        }

        function updateNotificationCount() {
            const unreadCount = notifications.filter(n => !n.read).length;
            notificationCount.textContent = unreadCount;
            notificationCount.style.display = unreadCount > 0 ? 'flex' : 'none';
        }

        // [Todas las dem√°s funciones de gesti√≥n permanecen iguales...]
    </script>
</body>
</html>